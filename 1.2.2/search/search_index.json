{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"imgx","text":"<p>Package imgx provides comprehensive image processing functions (resize, rotate, crop, brightness/contrast adjustments, effects) and AI-powered object detection using Google Gemini, AWS Rekognition, and OpenAI Vision APIs.</p> <p>All the image processing functions provided by the package accept any image type that implements <code>image.Image</code> interface as an input, and return a new image of <code>*image.NRGBA</code> type (32bit RGBA colors, non-premultiplied alpha).</p>"},{"location":"#table-of-contents","title":"Table of Contents","text":"<ul> <li>Installation</li> <li>As a Library</li> <li>As a CLI Tool</li> <li>Documentation</li> <li>CLI Documentation - Complete CLI guide</li> <li>Detection API - AI-powered object detection</li> <li>Version Management - How versions are managed</li> <li>Release Process - How to create releases</li> <li>Library Usage Examples</li> <li>Quick Start</li> <li>Image Resizing</li> <li>Image Rotation</li> <li>Image Flipping</li> <li>Gaussian Blur</li> <li>Sharpening</li> <li>Color Adjustments</li> <li>More Library Usage Examples</li> <li>Watermark Example</li> <li>Image Transformations</li> <li>Effects and Filters</li> <li>Advanced Example: Image Collage</li> <li>Features</li> <li>Performance</li> <li>FAQ</li> <li>Acknowledgments</li> <li>License</li> </ul>"},{"location":"#installation","title":"Installation","text":""},{"location":"#as-a-library","title":"As a Library","text":"<pre><code>go get -u github.com/razzkumar/imgx\n</code></pre>"},{"location":"#as-a-cli-tool","title":"As a CLI Tool","text":"<pre><code># Install via go install (Recommended)\ngo install github.com/razzkumar/imgx/cmd/imgx@latest\n\n# Or build from source\ngo build -o imgx ./cmd/imgx\n</code></pre> <p>Quick CLI Examples:</p> <pre><code># Resize an image\nimgx resize photo.jpg -w 800 -o resized.jpg\n\n# Create a thumbnail\nimgx thumbnail photo.jpg -s 150 -o thumb.jpg\n\n# Adjust colors\nimgx adjust photo.jpg --brightness 10 --contrast 20 -o adjusted.jpg\n\n# Apply blur effect\nimgx blur photo.jpg --sigma 2.5 -o blurred.jpg\n\n# Detect objects using AI (local Ollama by default)\nimgx detect photo.jpg\n\n# Extract image metadata (requires exiftool for extended data)\nimgx metadata photo.jpg\n</code></pre> <p>For complete CLI documentation with all commands, options, and examples, see CLI Documentation.</p>"},{"location":"#documentation","title":"Documentation","text":"<p>Library API: https://pkg.go.dev/github.com/razzkumar/imgx CLI Tool: CLI.md Object Detection: DETECTION.md - AI vision with Ollama, Google Gemini, AWS Rekognition, OpenAI</p>"},{"location":"#library-usage-examples","title":"Library Usage Examples","text":"<p>A few usage examples can be found below. See the documentation for the full list of supported functions.</p>"},{"location":"#quick-start-using-as-a-library","title":"Quick Start - Using as a Library","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load an image file\n    img, err := imgx.Load(\"input.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to load image: %v\", err)\n    }\n\n    // Resize to width 800px, maintaining aspect ratio\n    img = img.Resize(800, 0, imgx.Lanczos)\n\n    // Save the result (with automatic metadata tracking)\n    err = img.Save(\"output.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to save image: %v\", err)\n    }\n}\n</code></pre>"},{"location":"#loading-options","title":"Loading Options","text":"<p>You can customize image loading by passing an <code>Options</code> struct:</p> <pre><code>// Load with auto-orientation\nimg, err := imgx.Load(\"photo.jpg\", imgx.Options{\n    AutoOrient: true,  // Apply EXIF orientation\n})\n\n// Load with custom author\nimg, err := imgx.Load(\"photo.jpg\", imgx.Options{\n    Author: \"Your Name\",  // Override default author in metadata\n})\n\n// Load with multiple options\nimg, err := imgx.Load(\"photo.jpg\", imgx.Options{\n    AutoOrient:      true,\n    Author:          \"John Doe\",\n    DisableMetadata: false,  // Enable/disable metadata tracking\n})\n\n// Or just use defaults (no options needed)\nimg, err := imgx.Load(\"photo.jpg\")\n</code></pre> <p>Available Options: - <code>AutoOrient</code> (bool) - Automatically correct image orientation from EXIF data - <code>Author</code> (string) - Set custom artist/creator name for metadata (empty = use default) - <code>DisableMetadata</code> (bool) - Disable automatic metadata tracking for this image</p>"},{"location":"#image-resizing","title":"Image resizing","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Resize to size = 128x128px using the Lanczos filter.\nimg128 := img.Resize(128, 128, imgx.Lanczos)\n\n// Resize to width = 800px preserving the aspect ratio.\nimg800 := img.Resize(800, 0, imgx.Lanczos)\n\n// Scale down to fit the 800x600px bounding box.\nimgFit := img.Fit(800, 600, imgx.Lanczos)\n\n// Resize and crop to fill the 100x100px area.\nimgFill := img.Fill(100, 100, imgx.Center, imgx.Lanczos)\n</code></pre> <p>Example Output:</p> <p>Original Image (1280\u00d7853):</p> <p></p> <p>After <code>Resize(src, 200, 0, imgx.Lanczos)</code> - Resized to width 200px, height auto:</p> <p></p> <p>After <code>Fill(src, 300, 300, imgx.Center, imgx.Lanczos)</code> - Square thumbnail 300\u00d7300:</p> <p></p> <p>Imaging supports image resizing using various resampling filters. The most notable ones: - <code>Lanczos</code> - A high-quality resampling filter for photographic images yielding sharp results. - <code>CatmullRom</code> - A sharp cubic filter that is faster than Lanczos filter while providing similar results. - <code>MitchellNetravali</code> - A cubic filter that produces smoother results with less ringing artifacts than CatmullRom. - <code>Linear</code> - Bilinear resampling filter, produces smooth output. Faster than cubic filters. - <code>Box</code> - Simple and fast averaging filter appropriate for downscaling. When upscaling it's similar to NearestNeighbor. - <code>NearestNeighbor</code> - Fastest resampling filter, no antialiasing.</p> <p>The full list of supported filters:  NearestNeighbor, Box, Linear, Hermite, MitchellNetravali, CatmullRom, BSpline, Gaussian, Lanczos, Hann, Hamming, Blackman, Bartlett, Welch, Cosine. Custom filters can be created using ResampleFilter struct.</p> <p>Resampling filters comparison</p> <p>The same image can be resized using different resampling filters. From faster (lower quality) to slower (higher quality): <code>NearestNeighbor</code>, <code>Linear</code>, <code>CatmullRom</code>, <code>Lanczos</code>.</p>"},{"location":"#image-rotation","title":"Image Rotation","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"branch.jpg\")\n\n// Rotate 90 degrees clockwise\nrotated := img.Rotate90()\n</code></pre> <p>Original Image:</p> <p></p> <p>After <code>Rotate90(src)</code>:</p> <p></p>"},{"location":"#image-flipping","title":"Image Flipping","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"branch.jpg\")\n\n// Flip horizontally\nflipped := img.FlipH()\n</code></pre> <p>After <code>FlipH(src)</code>:</p> <p></p>"},{"location":"#gaussian-blur","title":"Gaussian Blur","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Apply Gaussian blur with sigma 2.0\nblurred := img.Blur(2.0)\n</code></pre> <p>After <code>Blur(src, 2.0)</code> - Gaussian blur with sigma=2.0:</p> <p></p>"},{"location":"#sharpening","title":"Sharpening","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Light sharpening\nlightSharp := img.Sharpen(0.5)\n\n// Medium sharpening\nmediumSharp := img.Sharpen(1.0)\n\n// Heavy sharpening\nheavySharp := img.Sharpen(2.0)\n</code></pre> <p><code>Sharpen</code> uses unsharp mask technique internally. Sigma parameter controls the strength of the sharpening effect.</p> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After <code>Sharpen(src, 1.5)</code> - Sharpened with sigma=1.5:</p> <p></p>"},{"location":"#color-adjustments","title":"Color Adjustments","text":""},{"location":"#gamma-correction","title":"Gamma Correction","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Darken image (gamma &lt; 1.0)\ndarker := img.AdjustGamma(0.5)\n\n// Lighten image (gamma &gt; 1.0)\nlighter := img.AdjustGamma(1.5)\n</code></pre>"},{"location":"#contrast-adjustment","title":"Contrast Adjustment","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Decrease contrast\nlowContrast := img.AdjustContrast(-20)\n\n// Increase contrast\nhighContrast := img.AdjustContrast(20)\n</code></pre> <p>Range: -100 (min contrast) to 100 (max contrast)</p> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After <code>AdjustContrast(src, 30)</code> - Increased contrast:</p> <p></p>"},{"location":"#brightness-adjustment","title":"Brightness Adjustment","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Decrease brightness\ndarker := img.AdjustBrightness(-20)\n\n// Increase brightness\nbrighter := img.AdjustBrightness(20)\n</code></pre> <p>Range: -100 (darkest) to 100 (brightest)</p> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After <code>AdjustBrightness(src, 30)</code> - Increased brightness:</p> <p></p>"},{"location":"#saturation-adjustment","title":"Saturation Adjustment","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Desaturate (move towards grayscale)\ndesaturated := img.AdjustSaturation(-50)\n\n// Increase saturation (more vivid colors)\nsaturated := img.AdjustSaturation(50)\n\n// Complete desaturation\ngrayscale := img.AdjustSaturation(-100)\n</code></pre> <p>Range: -100 (grayscale) to 500 (highly saturated)</p> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After <code>AdjustSaturation(src, 50)</code> - Increased saturation:</p> <p></p>"},{"location":"#hue-adjustment","title":"Hue Adjustment","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Shift hue by 20 degrees\nshifted := img.AdjustHue(20)\n\n// Shift hue by 180 degrees (complementary colors)\ninverted := img.AdjustHue(180)\n</code></pre> <p>Range: -180 to 180 degrees</p>"},{"location":"#grayscale-conversion","title":"Grayscale Conversion","text":"<pre><code>// Load an image\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Convert image to grayscale\ngray := img.Grayscale()\n</code></pre> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After <code>Grayscale(src)</code> - Converted to grayscale:</p> <p></p> <p>Example: Complete color adjustment pipeline with method chaining <pre><code>// Load and process image with method chaining\nimg, _ := imgx.Load(\"input.jpg\")\n\n// Adjust multiple properties by chaining methods\nresult := img.AdjustBrightness(10).\n    AdjustContrast(20).\n    AdjustSaturation(30)\n\nresult.Save(\"output_adjusted.jpg\")\n</code></pre></p>"},{"location":"#more-library-usage-examples","title":"More Library Usage Examples","text":""},{"location":"#example-1-create-thumbnail-gallery","title":"Example 1: Create Thumbnail Gallery","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load source image\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Create different thumbnail sizes\n    thumb100 := img.Thumbnail(100, 100, imgx.Lanczos)\n    thumb200 := img.Thumbnail(200, 200, imgx.Lanczos)\n    thumb400 := img.Thumbnail(400, 400, imgx.Lanczos)\n\n    // Save thumbnails\n    thumb100.Save(\"thumb_100.jpg\")\n    thumb200.Save(\"thumb_200.jpg\")\n    thumb400.Save(\"thumb_400.jpg\")\n}\n</code></pre>"},{"location":"#example-2-batch-image-processing","title":"Example 2: Batch Image Processing","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n    \"path/filepath\"\n    \"strings\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Process all JPG files in a directory\n    files, _ := filepath.Glob(\"input/*.jpg\")\n\n    for _, file := range files {\n        // Load image\n        img, err := imgx.Load(file)\n        if err != nil {\n            log.Printf(\"Failed to load %s: %v\", file, err)\n            continue\n        }\n\n        // Process with method chaining: resize, enhance contrast, and sharpen\n        processed := img.Resize(1920, 0, imgx.Lanczos).\n            AdjustContrast(10).\n            Sharpen(0.5)\n\n        // Save with new name\n        basename := filepath.Base(file)\n        outname := \"output/\" + strings.TrimSuffix(basename, \".jpg\") + \"_processed.jpg\"\n\n        if err := processed.Save(outname); err != nil {\n            log.Printf(\"Failed to save %s: %v\", outname, err)\n        }\n    }\n}\n</code></pre>"},{"location":"#example-3-add-watermark","title":"Example 3: Add Watermark","text":"<pre><code>package main\n\nimport (\n    \"image\"\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load main image\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Load watermark\n    watermark, err := imgx.Load(\"watermark.png\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Resize watermark to 20% of image width\n    bounds := img.Bounds()\n    wmWidth := bounds.Dx() / 5\n    watermark = watermark.Resize(wmWidth, 0, imgx.Lanczos)\n\n    // Position watermark in bottom-right corner\n    wmBounds := watermark.Bounds()\n    position := image.Pt(\n        bounds.Dx()-wmBounds.Dx()-20,\n        bounds.Dy()-wmBounds.Dy()-20,\n    )\n\n    // Overlay watermark with transparency and save\n    result := img.Overlay(watermark, position, 0.6)\n    result.Save(\"watermarked.jpg\")\n}\n</code></pre> <p>Example Output:</p> <p>Original Image:</p> <p></p> <p>After adding watermark with <code>Overlay()</code> - Watermark in bottom-right corner with 60% opacity:</p> <p></p>"},{"location":"#example-4-image-transformations","title":"Example 4: Image Transformations","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Rotate 90 degrees\n    img.Rotate90().Save(\"rotated_90.jpg\")\n\n    // Rotate 45 degrees with white background\n    img.Rotate(45, imgx.White).Save(\"rotated_45.jpg\")\n\n    // Flip horizontal\n    img.FlipH().Save(\"flipped_h.jpg\")\n\n    // Flip vertical\n    img.FlipV().Save(\"flipped_v.jpg\")\n\n    // Transpose (flip + rotate)\n    img.Transpose().Save(\"transposed.jpg\")\n}\n</code></pre>"},{"location":"#example-5-image-effects-and-filters","title":"Example 5: Image Effects and Filters","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Convert to grayscale\n    img.Grayscale().Save(\"grayscale.jpg\")\n\n    // Invert colors\n    img.Invert().Save(\"inverted.jpg\")\n\n    // Apply custom convolution (edge detection)\n    img.Convolve3x3(\n        [9]float64{\n            -1, -1, -1,\n            -1,  8, -1,\n            -1, -1, -1,\n        },\n        nil,\n    ).Save(\"edges.jpg\")\n\n    // Emboss effect\n    img.Convolve3x3(\n        [9]float64{\n            -1, -1, 0,\n            -1,  1, 1,\n             0,  1, 1,\n        },\n        nil,\n    ).Save(\"embossed.jpg\")\n}\n</code></pre>"},{"location":"#example-6-working-with-different-image-formats","title":"Example 6: Working with Different Image Formats","text":"<pre><code>package main\n\nimport (\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load with auto-orientation from EXIF\n    img, err := imgx.Load(\"photo.jpg\", imgx.Options{AutoOrient: true})\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Process\n    processed := img.Resize(800, 0, imgx.Lanczos)\n\n    // Save as different formats (format auto-detected from extension)\n    processed.Save(\"output.jpg\")  // JPEG\n    processed.Save(\"output.png\")  // PNG\n    processed.Save(\"output.gif\")  // GIF\n    processed.Save(\"output.tiff\") // TIFF\n    processed.Save(\"output.bmp\")  // BMP\n}\n</code></pre>"},{"location":"#example-7-extract-image-metadata","title":"Example 7: Extract Image Metadata","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Extract metadata (uses exiftool if available, falls back to basic metadata)\n    metadata, err := imgx.Metadata(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Display basic information (always available)\n    fmt.Printf(\"File: %s\\n\", metadata.FilePath)\n    fmt.Printf(\"Format: %s\\n\", metadata.Format)\n    fmt.Printf(\"Dimensions: %dx%d\\n\", metadata.Width, metadata.Height)\n    fmt.Printf(\"Megapixels: %.2f MP\\n\", metadata.Megapixels)\n\n    // Display extended metadata if available (requires exiftool)\n    if metadata.HasExtended {\n        fmt.Println(\"\\nExtended Metadata:\")\n        if metadata.CameraMake != \"\" {\n            fmt.Printf(\"Camera: %s %s\\n\", metadata.CameraMake, metadata.CameraModel)\n        }\n        if metadata.DateTimeOriginal != \"\" {\n            fmt.Printf(\"Date Taken: %s\\n\", metadata.DateTimeOriginal)\n        }\n        if metadata.ISO != \"\" {\n            fmt.Printf(\"ISO: %s\\n\", metadata.ISO)\n        }\n        if metadata.GPSLatitude != \"\" {\n            fmt.Printf(\"GPS: %s, %s\\n\", metadata.GPSLatitude, metadata.GPSLongitude)\n        }\n    } else {\n        fmt.Println(\"\\nNote: Install exiftool for comprehensive metadata\")\n    }\n\n    // Extract basic metadata only (skip exiftool check)\n    basicMeta, err := imgx.Metadata(\"photo.jpg\", imgx.WithBasicOnly())\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Printf(\"\\nFile Size: %d bytes\\n\", basicMeta.FileSize)\n}\n</code></pre>"},{"location":"#example-8-ai-object-detection","title":"Example 8: AI Object Detection","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"log\"\n    \"github.com/razzkumar/imgx\"\n    \"github.com/razzkumar/imgx/detection\"\n)\n\nfunc main() {\n    // Load image\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Detect objects using the local Ollama model\n    ctx := context.Background()\n    result, err := img.Detect(ctx, \"ollama\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Display detected labels\n    fmt.Println(\"Detected objects:\")\n    for _, label := range result.Labels {\n        fmt.Printf(\"- %s (%.1f%% confidence)\\n\", label.Name, label.Confidence*100)\n    }\n\n    // Use AWS Rekognition for image properties\n    opts := &amp;detection.DetectOptions{\n        Features: []detection.Feature{detection.FeatureProperties},\n    }\n    result, err = img.Detect(ctx, \"aws\", opts)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Display image properties\n    fmt.Printf(\"\\nBrightness: %s\\n\", result.Properties[\"brightness\"])\n    fmt.Printf(\"Dominant colors: %s\\n\", result.Properties[\"dominant_colors\"])\n}\n</code></pre> <p>For complete detection API documentation including all providers, features, and examples, see Detection Documentation.</p>"},{"location":"#automatic-processing-metadata-tracking","title":"Automatic Processing Metadata Tracking","text":"<p>imgx automatically tracks all processing operations applied to images and can embed this information as XMP metadata when saving. This feature provides full transparency about how images were processed.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<p>When you use the instance-based API (<code>imgx.Load()</code>, method chaining), imgx automatically: 1. Records every operation (resize, rotate, adjust, etc.) 2. Tracks parameters for each operation 3. Timestamps each operation 4. Embeds this information as XMP metadata when saving (if exiftool is available)</p>"},{"location":"#basic-usage","title":"Basic Usage","text":"<pre><code>// Load an image - metadata tracking starts automatically\nimg, _ := imgx.Load(\"photo.jpg\")\n\n// Apply operations - each operation is recorded\nresult := img.Resize(800, 0, imgx.Lanczos).\n    AdjustBrightness(10).\n    AdjustContrast(20).\n    Sharpen(1.0)\n\n// Save - metadata is automatically embedded in the output file\nresult.Save(\"output.jpg\")\n\n// The output.jpg file now contains XMP metadata with:\n// - Software: imgx v1.0.0\n// - Processing history: resize, adjust brightness, adjust contrast, sharpen\n// - Parameters for each operation\n// - Timestamps for each operation\n</code></pre>"},{"location":"#disabling-metadata","title":"Disabling Metadata","text":"<p>There are three ways to disable metadata tracking:</p> <p>1. Per-Image (at load time): <pre><code>// Disable metadata for a specific image\nimg, _ := imgx.Load(\"photo.jpg\", imgx.Options{DisableMetadata: true})\nimg.Resize(800, 0, imgx.Lanczos).Save(\"output.jpg\")  // No metadata written\n</code></pre></p> <p>2. Per-Save Operation: <pre><code>// Process with metadata tracking, but don't write it\nimg, _ := imgx.Load(\"photo.jpg\")\nresult := img.Resize(800, 0, imgx.Lanczos)\nresult.Save(\"output.jpg\", imgx.WithoutMetadata())  // Skip metadata on save\n</code></pre></p> <p>3. Globally (environment variable): <pre><code># Disable metadata for all operations\nexport IMGX_ADD_METADATA=false\n\n# Or in code:\nimgx.SetAddMetadata(false)\n</code></pre></p>"},{"location":"#working-with-standard-library","title":"Working with Standard Library","text":"<p>The instance-based API is fully compatible with Go's standard <code>image.Image</code> interface:</p> <pre><code>// Load from standard library image\nvar stdImg image.Image = loadFromSomewhere()\nimg := imgx.FromImage(stdImg)\n\n// Process with metadata tracking\nresult := img.Resize(800, 0, imgx.Lanczos)\n\n// Convert back to standard library type if needed\nnrgba := result.ToNRGBA()\n</code></pre>"},{"location":"#method-chaining","title":"Method Chaining","text":"<p>All processing methods return new <code>*imgx.Image</code> instances, allowing for clean method chaining:</p> <pre><code>img, _ := imgx.Load(\"photo.jpg\")\n\n// Chain multiple operations\nresult := img.\n    Resize(1920, 0, imgx.Lanczos).\n    CropCenter(1200, 800).\n    AdjustBrightness(10).\n    AdjustContrast(15).\n    AdjustSaturation(20).\n    Sharpen(1.0)\n\nresult.Save(\"processed.jpg\")\n</code></pre>"},{"location":"#migration-from-functional-api","title":"Migration from Functional API","text":"<p>If you're migrating from the older functional API (<code>imgx.Open</code>, <code>imgx.Resize</code>, etc.), both APIs are still available:</p> <p>Old (Functional API): <pre><code>img, _ := imgx.Open(\"input.jpg\")\nimg = imgx.Resize(img, 800, 0, imgx.Lanczos)\nimg = imgx.AdjustContrast(img, 20)\nimgx.Save(img, \"output.jpg\")\n</code></pre></p> <p>New (Instance-Based API with metadata): <pre><code>img, _ := imgx.Load(\"input.jpg\")\nimg = img.Resize(800, 0, imgx.Lanczos).AdjustContrast(20)\nimg.Save(\"output.jpg\")\n</code></pre></p> <p>The functional API remains available for backward compatibility but does not include automatic metadata tracking.</p>"},{"location":"#faq","title":"FAQ","text":""},{"location":"#incorrect-image-orientation-after-processing-eg-an-image-appears-rotated-after-resizing","title":"Incorrect image orientation after processing (e.g. an image appears rotated after resizing)","text":"<p>Most probably, the given image contains the EXIF orientation tag. The standard <code>image/*</code> packages do not support loading and saving this kind of information. To fix the issue, try opening images with the <code>AutoOrientation</code> decode option. If this option is set to <code>true</code>, the image orientation is changed after decoding, according to the orientation tag (if present). Here's the example:</p> <pre><code>img, err := imgx.Load(\"test.jpg\", imgx.Options{AutoOrient: true})\n</code></pre>"},{"location":"#whats-the-difference-between-imaging-and-gift-packages","title":"What's the difference between <code>imaging</code> and <code>gift</code> packages?","text":"<p>imaging is designed to be a lightweight and simple image manipulation package. It provides basic image processing functions and a few helper functions such as <code>Open</code> and <code>Save</code>. It consistently returns *image.NRGBA image  type (8 bits per channel, RGBA).</p>"},{"location":"#advanced-example-image-collage","title":"Advanced Example: Image Collage","text":"<p>This example demonstrates creating a 2x2 collage with different effects applied to each quadrant:</p> <pre><code>package main\n\nimport (\n    \"image\"\n    \"image/color\"\n    \"log\"\n\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load a test image.\n    img, err := imgx.Load(\"testdata/flower.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to load image: %v\", err)\n    }\n\n    // Crop and resize using method chaining\n    src := img.CropAnchor(300, 300, imgx.Center).Resize(200, 0, imgx.Lanczos)\n\n    // Create a blurred version of the image.\n    img1 := src.Blur(5)\n\n    // Create a grayscale version with higher contrast and sharpness.\n    img2 := src.Grayscale().AdjustContrast(20).Sharpen(2)\n\n    // Create an inverted version of the image.\n    img3 := src.Invert()\n\n    // Create an embossed version using a convolution filter.\n    img4 := src.Convolve3x3(\n        [9]float64{\n            -1, -1, 0,\n            -1, 1, 1,\n            0, 1, 1,\n        },\n        nil,\n    )\n\n    // Create a new 400x400px image and paste the four produced images into it.\n    dst := imgx.NewImage(400, 400, color.NRGBA{0, 0, 0, 0})\n    dst = dst.Paste(img1, image.Pt(0, 0))      // Top-left: Blurred\n    dst = dst.Paste(img2, image.Pt(0, 200))    // Bottom-left: Grayscale + Enhanced\n    dst = dst.Paste(img3, image.Pt(200, 0))    // Top-right: Inverted\n    dst = dst.Paste(img4, image.Pt(200, 200))  // Bottom-right: Embossed\n\n    // Save the resulting image as JPEG.\n    err = dst.Save(\"testdata/out_example.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to save image: %v\", err)\n    }\n\n    log.Println(\"Collage created successfully: testdata/out_example.jpg\")\n}\n</code></pre> <p>Output: A 2x2 grid showing the same image with four different effects applied.</p>"},{"location":"#features","title":"Features","text":"<p>imgx provides a comprehensive set of image processing capabilities:</p> <p>Resizing &amp; Transformations: - Multiple resampling filters (Lanczos, CatmullRom, Linear, Box, NearestNeighbor, etc.) - Resize, Fit, Fill, Thumbnail operations - Rotate (90\u00b0, 180\u00b0, 270\u00b0, arbitrary angles) - Flip horizontal/vertical, Transpose, Transverse - Crop with anchor points</p> <p>Color Adjustments: - Brightness, Contrast, Gamma correction - Saturation, Hue adjustments - Grayscale conversion - Color inversion</p> <p>Effects &amp; Filters: - Gaussian blur - Unsharp mask sharpening - Custom 3x3 and 5x5 convolution kernels - Edge detection, emboss, and custom effects</p> <p>Image Composition: - Paste images together - Overlay with alpha blending - Watermarking support - Create collages and thumbnails</p> <p>I/O &amp; Format Support: - Formats: JPEG, PNG, GIF, TIFF, BMP - EXIF auto-orientation for JPEG files - Encode/Decode with custom options - Format auto-detection from file extensions - Metadata extraction (EXIF, IPTC, XMP with exiftool) - Automatic processing metadata tracking and XMP embedding</p> <p>AI Object Detection: - Support for Google Gemini, AWS Rekognition, and OpenAI Vision - Label/object detection with confidence scores - Text extraction (OCR) - Face detection with attributes - Image quality analysis (brightness, sharpness, contrast) - Dominant color extraction - Natural language descriptions - See Detection Documentation for details</p> <p>API Design: - Instance-based API with method chaining for clean, readable code - Automatic operation tracking and metadata embedding - Functional API still available for backward compatibility - Interoperable with Go's standard <code>image.Image</code> interface</p> <p>Performance: - Parallel processing across CPU cores - Optimized scanners for common image formats - Separable filter approach for resize and blur - Memory-efficient streaming operations</p>"},{"location":"#performance","title":"Performance","text":"<p>imgx is designed for high performance with parallel processing and optimized algorithms.</p>"},{"location":"#running-benchmarks","title":"Running Benchmarks","text":"<pre><code># Run all benchmarks\ngo test -bench=.\n\n# Run specific benchmark with memory stats\ngo test -bench=BenchmarkResize -benchmem\n\n# Run benchmarks multiple times for accuracy\ngo test -bench=. -benchtime=10s -count=3\n</code></pre>"},{"location":"#example-benchmark-results","title":"Example Benchmark Results","text":"<pre><code>BenchmarkResize-8        100   12.3 ms/op   8.2 MB/s   4.5 MB/op\nBenchmarkBlur-8          50    24.5 ms/op   4.1 MB/s   6.2 MB/op\nBenchmarkRotate90-8      200   5.8 ms/op    17.2 MB/s  2.1 MB/op\nBenchmarkGrayscale-8     300   4.2 ms/op    23.8 MB/s  1.8 MB/op\n</code></pre> <p>The library automatically utilizes all available CPU cores for operations on large images. You can control parallelism using:</p> <pre><code>imgx.SetMaxProcs(4)  // Limit to 4 CPU cores\n</code></pre>"},{"location":"#acknowledgments","title":"Acknowledgments","text":"<p>imgx is a brand new image processing library designed from the ground up with modern Go practices. We drew inspiration from:</p> <ul> <li>imaging by Grigory Dryapak - for foundational image processing algorithms and API design patterns</li> <li>go-exiftool - for metadata handling approaches and exiftool integration concepts</li> </ul>"},{"location":"#what-makes-imgx-different","title":"What Makes imgx Different?","text":"<p>imgx is a complete reimagination with a modern architecture:</p> <ul> <li>Instance-based API: Fluent method-chaining design for intuitive, readable code</li> <li>Automatic metadata tracking: Built-in operation history with XMP embedding</li> <li>Modern Go 1.21+ features:</li> <li>Range over integers, built-in min/max</li> <li>WaitGroup.Go() for goroutines</li> <li>Latest benchmarking patterns</li> <li>Comprehensive CLI: Full-featured command-line tool with metadata support</li> <li>Clean architecture: Modular design with clear separation of concerns</li> <li>Developer-friendly: Extensive documentation, examples, and type safety</li> </ul>"},{"location":"#incorrect-image-orientation-after-processing-eg-an-image-appears-rotated-after-resizing_1","title":"Incorrect image orientation after processing (e.g. an image appears rotated after resizing)","text":"<p>Most probably, the given image contains the EXIF orientation tag. The standard <code>image/*</code> packages do not support loading and saving this kind of information. To fix the issue, try opening images with the <code>AutoOrientation</code> decode option. If this option is set to <code>true</code>, the image orientation is changed after decoding, according to the orientation tag (if present). Here's the example:</p> <pre><code>img, err := imgx.Load(\"test.jpg\", imgx.Options{AutoOrient: true})\n</code></pre>"},{"location":"#whats-the-difference-between-imaging-and-gift-packages_1","title":"What's the difference between <code>imaging</code> and <code>gift</code> packages?","text":"<p>imaging is designed to be a lightweight and simple image manipulation package. It provides basic image processing functions and a few helper functions such as <code>Open</code> and <code>Save</code>. It consistently returns *image.NRGBA image  type (8 bits per channel, RGBA).</p>"},{"location":"#advanced-example-image-collage_1","title":"Advanced Example: Image Collage","text":"<p>This example demonstrates creating a 2x2 collage with different effects applied to each quadrant:</p> <pre><code>package main\n\nimport (\n    \"image\"\n    \"image/color\"\n    \"log\"\n\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load a test image.\n    img, err := imgx.Load(\"testdata/flower.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to load image: %v\", err)\n    }\n\n    // Crop and resize using method chaining\n    src := img.CropAnchor(300, 300, imgx.Center).Resize(200, 0, imgx.Lanczos)\n\n    // Create a blurred version of the image.\n    img1 := src.Blur(5)\n\n    // Create a grayscale version with higher contrast and sharpness.\n    img2 := src.Grayscale().AdjustContrast(20).Sharpen(2)\n\n    // Create an inverted version of the image.\n    img3 := src.Invert()\n\n    // Create an embossed version using a convolution filter.\n    img4 := src.Convolve3x3(\n        [9]float64{\n            -1, -1, 0,\n            -1, 1, 1,\n            0, 1, 1,\n        },\n        nil,\n    )\n\n    // Create a new 400x400px image and paste the four produced images into it.\n    dst := imgx.NewImage(400, 400, color.NRGBA{0, 0, 0, 0})\n    dst = dst.Paste(img1, image.Pt(0, 0))      // Top-left: Blurred\n    dst = dst.Paste(img2, image.Pt(0, 200))    // Bottom-left: Grayscale + Enhanced\n    dst = dst.Paste(img3, image.Pt(200, 0))    // Top-right: Inverted\n    dst = dst.Paste(img4, image.Pt(200, 200))  // Bottom-right: Embossed\n\n    // Save the resulting image as JPEG.\n    err = dst.Save(\"testdata/out_example.jpg\")\n    if err != nil {\n        log.Fatalf(\"failed to save image: %v\", err)\n    }\n\n    log.Println(\"Collage created successfully: testdata/out_example.jpg\")\n}\n</code></pre> <p>Output: A 2x2 grid showing the same image with four different effects applied.</p>"},{"location":"#features_1","title":"Features","text":"<p>imgx provides a comprehensive set of image processing capabilities:</p> <p>Resizing &amp; Transformations: - Multiple resampling filters (Lanczos, CatmullRom, Linear, Box, NearestNeighbor, etc.) - Resize, Fit, Fill, Thumbnail operations - Rotate (90\u00b0, 180\u00b0, 270\u00b0, arbitrary angles) - Flip horizontal/vertical, Transpose, Transverse - Crop with anchor points</p> <p>Color Adjustments: - Brightness, Contrast, Gamma correction - Saturation, Hue adjustments - Grayscale conversion - Color inversion</p> <p>Effects &amp; Filters: - Gaussian blur - Unsharp mask sharpening - Custom 3x3 and 5x5 convolution kernels - Edge detection, emboss, and custom effects</p> <p>Image Composition: - Paste images together - Overlay with alpha blending - Watermarking support - Create collages and thumbnails</p> <p>I/O &amp; Format Support: - Formats: JPEG, PNG, GIF, TIFF, BMP - EXIF auto-orientation for JPEG files - Encode/Decode with custom options - Format auto-detection from file extensions - Metadata extraction (EXIF, IPTC, XMP with exiftool) - Automatic processing metadata tracking and XMP embedding</p> <p>AI Object Detection: - Support for Google Gemini, AWS Rekognition, and OpenAI Vision - Label/object detection with confidence scores - Text extraction (OCR) - Face detection with attributes - Image quality analysis (brightness, sharpness, contrast) - Dominant color extraction - Natural language descriptions - See Detection Documentation for details</p> <p>API Design: - Instance-based API with method chaining for clean, readable code - Automatic operation tracking and metadata embedding - Functional API still available for backward compatibility - Interoperable with Go's standard <code>image.Image</code> interface</p> <p>Performance: - Parallel processing across CPU cores - Optimized scanners for common image formats - Separable filter approach for resize and blur - Memory-efficient streaming operations</p>"},{"location":"#performance_1","title":"Performance","text":"<p>imgx is designed for high performance with parallel processing and optimized algorithms.</p>"},{"location":"#running-benchmarks_1","title":"Running Benchmarks","text":"<pre><code># Run all benchmarks\ngo test -bench=.\n\n# Run specific benchmark with memory stats\ngo test -bench=BenchmarkResize -benchmem\n\n# Run benchmarks multiple times for accuracy\ngo test -bench=. -benchtime=10s -count=3\n</code></pre>"},{"location":"#example-benchmark-results_1","title":"Example Benchmark Results","text":"<pre><code>BenchmarkResize-8        100   12.3 ms/op   8.2 MB/s   4.5 MB/op\nBenchmarkBlur-8          50    24.5 ms/op   4.1 MB/s   6.2 MB/op\nBenchmarkRotate90-8      200   5.8 ms/op    17.2 MB/s  2.1 MB/op\nBenchmarkGrayscale-8     300   4.2 ms/op    23.8 MB/s  1.8 MB/op\n</code></pre> <p>The library automatically utilizes all available CPU cores for operations on large images. You can control parallelism using:</p> <pre><code>imgx.SetMaxProcs(4)  // Limit to 4 CPU cores\n</code></pre>"},{"location":"#acknowledgments_1","title":"Acknowledgments","text":"<p>imgx is a brand new image processing library designed from the ground up with modern Go practices. We drew inspiration from:</p> <ul> <li>imaging by Grigory Dryapak - for foundational image processing algorithms and API design patterns</li> <li>go-exiftool - for metadata handling approaches and exiftool integration concepts</li> </ul>"},{"location":"#what-makes-imgx-different_1","title":"What Makes imgx Different?","text":"<p>imgx is a complete reimagination with a modern architecture:</p> <ul> <li>Instance-based API: Fluent method-chaining design for intuitive, readable code</li> <li>Automatic metadata tracking: Built-in operation history with XMP embedding</li> <li>Modern Go 1.21+ features:</li> <li>Range over integers, built-in min/max</li> <li>WaitGroup.Go() for goroutines</li> <li>Latest benchmarking patterns</li> <li>Comprehensive CLI: Full-featured command-line tool with metadata support</li> <li>Clean architecture: Modular design with clear separation of concerns</li> <li>Developer-friendly: Extensive documentation, examples, and type safety</li> </ul> <p>Thank you to the Go community and these projects for the inspiration!</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License. See the- License file for details.</p> <p>Copyright (c) 2025 razzkumar</p>"},{"location":"CLI/","title":"imgx CLI Documentation","text":"<p>A powerful command-line tool for image processing operations including resizing, transformations, color adjustments, effects, and watermarking.</p>"},{"location":"CLI/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Installation</li> <li>Shell Completion</li> <li>Quick Start</li> <li>Global Options</li> <li>Commands</li> <li>Resize Operations</li> <li>Transform Operations</li> <li>Color Adjustments</li> <li>Effects</li> <li>Watermarking</li> <li>Image Information</li> <li>Object Detection</li> <li>Common Use Cases</li> <li>Tips &amp; Tricks</li> </ul>"},{"location":"CLI/#installation","title":"Installation","text":"<pre><code># Install via go install (Recommended)\ngo install github.com/razzkumar/imgx/cmd/imgx@latest\n\n# Or build from source\ngo build -o imgx ./cmd/imgx\n</code></pre>"},{"location":"CLI/#shell-completion","title":"Shell Completion","text":"<p>imgx supports shell completion for Bash, Zsh, Fish, and PowerShell. This enables tab completion for commands, flags, and options.</p>"},{"location":"CLI/#bash","title":"Bash","text":"<p>Temporary (current session only): <pre><code>source &lt;(imgx completion bash)\n</code></pre></p> <p>Permanent: <pre><code># Save to completion directory\nimgx completion bash &gt; ~/.bash_completion.d/imgx\nsource ~/.bash_completion.d/imgx\n\n# Or add to .bashrc\necho 'source &lt;(imgx completion bash)' &gt;&gt; ~/.bashrc\n</code></pre></p>"},{"location":"CLI/#zsh","title":"Zsh","text":"<p>Add to <code>.zshrc</code>: <pre><code># Enable completions if not already enabled\nautoload -Uz compinit\ncompinit\n\n# Load imgx completions\nsource &lt;(imgx completion zsh)\n\n# Or add this line to .zshrc\necho 'source &lt;(imgx completion zsh)' &gt;&gt; ~/.zshrc\n</code></pre></p> <p>Alternative (using completion directory): <pre><code># Save to zsh completion directory\nimgx completion zsh &gt; \"${fpath[1]}/_imgx\"\n</code></pre></p>"},{"location":"CLI/#fish","title":"Fish","text":"<pre><code># Save to fish completion directory\nimgx completion fish &gt; ~/.config/fish/completions/imgx.fish\n</code></pre>"},{"location":"CLI/#powershell","title":"PowerShell","text":"<pre><code># Generate completion script\nimgx completion pwsh &gt; imgx.ps1\n\n# Load completions (add to your PowerShell profile)\n&amp; path\\to\\imgx.ps1\n</code></pre> <p>To find your PowerShell profile location: <pre><code>echo $PROFILE\n</code></pre></p>"},{"location":"CLI/#testing-completions","title":"Testing Completions","text":"<p>After setting up completions, test them by typing:</p> <pre><code>imgx &lt;TAB&gt;          # Shows all available commands\nimgx resize &lt;TAB&gt;   # Shows subcommands and help\nimgx --&lt;TAB&gt;        # Shows global flags (--output, --quality, etc.)\n</code></pre>"},{"location":"CLI/#what-completions-support","title":"What Completions Support","text":"<p>The shell completions currently support:</p> <p>\u2705 Command completion - Complete command names (resize, adjust, blur, etc.) \u2705 Subcommand completion - Navigate through command hierarchy \u2705 Global flag completion - Complete global flags at the root level (--output, --quality, --verbose) \u26a0\ufe0f Subcommand flags - Limited support for flags within subcommands (use <code>imgx &lt;command&gt; --help</code> to see available flags)</p>"},{"location":"CLI/#important-shell-completion-quirk","title":"\u26a0\ufe0f Important: Shell Completion Quirk","text":"<p>When you type <code>imgx &lt;command&gt; &lt;TAB&gt;</code>, the completion will suggest <code>help</code> as an option. However:</p> <ul> <li>DON'T use: <code>imgx thumbnail help</code> \u274c (will fail with \"Required flag not set\" error)</li> <li>DO use instead: <code>imgx help thumbnail</code> \u2705 or <code>imgx thumbnail --help</code> \u2705</li> </ul> <p>The completion system suggests <code>help</code> because it's technically a subcommand, but it doesn't work correctly with commands that have required flags. Always use one of the correct help syntaxes shown above.</p> <p>Note: To see all available flags for a specific command, use the help system: <pre><code>imgx adjust --help     # Shows all adjust command flags\nimgx resize --help     # Shows all resize command flags\n</code></pre></p>"},{"location":"CLI/#quick-start","title":"Quick Start","text":"<pre><code># Resize an image\nimgx resize photo.jpg -w 800 -o resized.jpg\n\n# Create a thumbnail\nimgx thumbnail photo.jpg -s 150 -o thumb.jpg\n\n# Adjust colors\nimgx adjust photo.jpg --brightness 10 --contrast 20 -o adjusted.jpg\n\n# Get image info\nimgx info photo.jpg\n</code></pre>"},{"location":"CLI/#global-options","title":"Global Options","text":"<p>Global options can be used with any command:</p> Flag Description Default <code>-o, --output &lt;path&gt;</code> Output file path Auto-generated <code>-q, --quality &lt;1-100&gt;</code> JPEG quality 95 <code>--auto-orient</code> Auto-orient based on EXIF data false <code>--format &lt;fmt&gt;</code> Force output format (jpg, png, gif, tiff, bmp) Detected from filename <code>-v, --verbose</code> Verbose output false <code>--help, -h</code> Show help <code>--version</code> Show version <p>Examples:</p> <pre><code># Save as JPEG with quality 90\nimgx resize photo.png -w 800 -o output.jpg --quality 90\n\n# Force PNG format with verbose output\nimgx grayscale photo.jpg --format png -v -o output.png\n\n# Auto-orient image based on EXIF before processing\nimgx resize photo.jpg -w 800 --auto-orient -o output.jpg\n</code></pre>"},{"location":"CLI/#commands","title":"Commands","text":""},{"location":"CLI/#resize-operations","title":"Resize Operations","text":""},{"location":"CLI/#resize-resize-to-specific-dimensions","title":"<code>resize</code> - Resize to specific dimensions","text":"<p>Resize an image to the specified width and height. If one dimension is 0, the aspect ratio is preserved.</p> <pre><code>imgx resize &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>-w, --width &lt;int&gt;</code> - Target width (0 to preserve aspect ratio) - <code>-h, --height &lt;int&gt;</code> - Target height (0 to preserve aspect ratio) - <code>-f, --filter &lt;name&gt;</code> - Resampling filter (default: lanczos)</p> <p>Available Filters: <code>lanczos</code>, <code>catmullrom</code>, <code>mitchellnetravali</code>, <code>linear</code>, <code>box</code>, <code>nearest</code>, <code>hermite</code>, <code>bspline</code>, <code>gaussian</code>, <code>hann</code>, <code>hamming</code>, <code>blackman</code>, <code>bartlett</code>, <code>welch</code>, <code>cosine</code></p> <p>Examples:</p> <pre><code># Resize to 800x600\nimgx resize photo.jpg -w 800 -h 600 -o output.jpg\n\n# Resize to width 800, preserve aspect ratio\nimgx resize photo.jpg -w 800 -o output.jpg\n\n# Resize with different filter\nimgx resize photo.jpg -w 800 -f catmullrom -o output.jpg\n</code></pre>"},{"location":"CLI/#fit-scale-to-fit-within-bounds","title":"<code>fit</code> - Scale to fit within bounds","text":"<p>Scale the image to fit within the specified dimensions while preserving aspect ratio.</p> <pre><code>imgx fit &lt;input&gt; -w &lt;width&gt; -h &lt;height&gt; [options]\n</code></pre> <p>Options: - <code>-w, --width &lt;int&gt;</code> - Maximum width (required) - <code>-h, --height &lt;int&gt;</code> - Maximum height (required) - <code>-f, --filter &lt;name&gt;</code> - Resampling filter (default: lanczos)</p> <p>Example:</p> <pre><code># Fit image within 800x600 bounding box\nimgx fit photo.jpg -w 800 -h 600 -o output.jpg\n</code></pre>"},{"location":"CLI/#fill-crop-and-resize-to-exact-dimensions","title":"<code>fill</code> - Crop and resize to exact dimensions","text":"<p>Resize and crop the image to fill the specified dimensions exactly. The image is scaled to cover the target size, then cropped to fit.</p> <pre><code>imgx fill &lt;input&gt; -w &lt;width&gt; -h &lt;height&gt; [options]\n</code></pre> <p>Options: - <code>-w, --width &lt;int&gt;</code> - Target width (required) - <code>-h, --height &lt;int&gt;</code> - Target height (required) - <code>-a, --anchor &lt;pos&gt;</code> - Anchor position (default: center) - <code>-f, --filter &lt;name&gt;</code> - Resampling filter (default: lanczos)</p> <p>Anchor Positions: <code>center</code>, <code>topleft</code>, <code>top</code>, <code>topright</code>, <code>left</code>, <code>right</code>, <code>bottomleft</code>, <code>bottom</code>, <code>bottomright</code></p> <p>Examples:</p> <pre><code># Fill 800x600 with center crop\nimgx fill photo.jpg -w 800 -h 600 -o output.jpg\n\n# Fill with top-left anchor\nimgx fill photo.jpg -w 800 -h 600 --anchor topleft -o output.jpg\n</code></pre>"},{"location":"CLI/#thumbnail-create-square-thumbnail","title":"<code>thumbnail</code> - Create square thumbnail","text":"<p>Create a square thumbnail by cropping and resizing.</p> <pre><code>imgx thumbnail &lt;input&gt; -s &lt;size&gt; [options]\n</code></pre> <p>Options: - <code>-s, --size &lt;int&gt;</code> - Thumbnail size (width and height) (required) - <code>-f, --filter &lt;name&gt;</code> - Resampling filter (default: lanczos)</p> <p>Example:</p> <pre><code>imgx thumbnail photo.jpg -s 150 -o thumb.jpg\n</code></pre>"},{"location":"CLI/#transform-operations","title":"Transform Operations","text":""},{"location":"CLI/#rotate-rotate-by-angle","title":"<code>rotate</code> - Rotate by angle","text":"<p>Rotate an image by the specified angle in degrees. Positive angles rotate counter-clockwise, negative angles rotate clockwise. Rotations of 90, 180, and 270 degrees are lossless.</p> <pre><code>imgx rotate &lt;input&gt; -a &lt;angle&gt; [options]\n</code></pre> <p>Options: - <code>-a, --angle &lt;float&gt;</code> - Rotation angle in degrees (required) - <code>--bg &lt;color&gt;</code> - Background color for empty areas (default: 00000000 = transparent)</p> <p>Color Format: RGB hex (<code>ffffff</code>) or RGBA hex (<code>ff0000ff</code>)</p> <p>Examples:</p> <pre><code># Rotate 90 degrees counter-clockwise\nimgx rotate photo.jpg -a 90 -o output.jpg\n\n# Rotate 45 degrees with white background\nimgx rotate photo.jpg -a 45 --bg ffffff -o output.jpg\n\n# Rotate 30 degrees clockwise (negative angle)\nimgx rotate photo.jpg -a -30 -o output.jpg\n</code></pre>"},{"location":"CLI/#quick-rotation-commands","title":"Quick Rotation Commands","text":"<p>For common rotations, use these shortcuts:</p> <pre><code># 90 degrees counter-clockwise\nimgx rotate90 photo.jpg -o output.jpg\n\n# 180 degrees\nimgx rotate180 photo.jpg -o output.jpg\n\n# 270 degrees counter-clockwise (90 clockwise)\nimgx rotate270 photo.jpg -o output.jpg\n</code></pre>"},{"location":"CLI/#flip-flip-horizontally-or-vertically","title":"<code>flip</code> - Flip horizontally or vertically","text":"<p>Flip an image horizontally (left-right), vertically (top-bottom), or both.</p> <pre><code>imgx flip &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>--horizontal, -H</code> - Flip horizontally (left-right) - <code>--vertical, -V</code> - Flip vertically (top-bottom)</p> <p>Examples:</p> <pre><code># Flip horizontally\nimgx flip photo.jpg --horizontal -o output.jpg\n\n# Flip vertically\nimgx flip photo.jpg --vertical -o output.jpg\n\n# Flip both (same as rotate 180)\nimgx flip photo.jpg --horizontal --vertical -o output.jpg\n</code></pre>"},{"location":"CLI/#crop-crop-to-region","title":"<code>crop</code> - Crop to region","text":"<p>Crop an image to a specific region using either anchor positioning or exact coordinates.</p> <pre><code>imgx crop &lt;input&gt; -w &lt;width&gt; -h &lt;height&gt; [options]\n</code></pre> <p>Options: - <code>-w, --width &lt;int&gt;</code> - Crop width (required) - <code>-h, --height &lt;int&gt;</code> - Crop height (required) - <code>-a, --anchor &lt;pos&gt;</code> - Anchor position (default: center) - <code>-x &lt;int&gt;</code> - X coordinate (left edge, exclusive with --anchor) - <code>-y &lt;int&gt;</code> - Y coordinate (top edge, exclusive with --anchor)</p> <p>Examples:</p> <pre><code># Crop 500x400 from center\nimgx crop photo.jpg -w 500 -h 400 --anchor center -o output.jpg\n\n# Crop from specific coordinates\nimgx crop photo.jpg -x 100 -y 100 -w 500 -h 400 -o output.jpg\n\n# Crop from top-left\nimgx crop photo.jpg -w 500 -h 400 --anchor topleft -o output.jpg\n</code></pre>"},{"location":"CLI/#transpose-transverse-advanced-transforms","title":"<code>transpose</code> / <code>transverse</code> - Advanced transforms","text":"<p>Special transformation operations:</p> <pre><code># Transpose: flip horizontally + rotate 90\u00b0 CCW\nimgx transpose photo.jpg -o output.jpg\n\n# Transverse: flip vertically + rotate 90\u00b0 CCW\nimgx transverse photo.jpg -o output.jpg\n</code></pre>"},{"location":"CLI/#color-adjustments","title":"Color Adjustments","text":""},{"location":"CLI/#adjust-adjust-colors","title":"<code>adjust</code> - Adjust colors","text":"<p>Adjust various color properties of an image. Multiple adjustments can be applied at once and are processed in order: brightness \u2192 contrast \u2192 gamma \u2192 saturation \u2192 hue.</p> <pre><code>imgx adjust &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>--brightness &lt;float&gt;</code> - Brightness adjustment (-100 to 100, 0 = no change) - <code>--contrast &lt;float&gt;</code> - Contrast adjustment (-100 to 100, 0 = no change) - <code>--gamma &lt;float&gt;</code> - Gamma correction (positive number, 1.0 = no change) - <code>--saturation &lt;float&gt;</code> - Saturation adjustment (-100 to 100, 0 = no change) - <code>--hue &lt;float&gt;</code> - Hue shift in degrees (-180 to 180, 0 = no change)</p> <p>Examples:</p> <pre><code># Increase brightness and contrast\nimgx adjust photo.jpg --brightness 10 --contrast 20 -o output.jpg\n\n# Adjust saturation and hue\nimgx adjust photo.jpg --saturation -30 --hue 60 -o output.jpg\n\n# Apply gamma correction\nimgx adjust photo.jpg --gamma 1.5 -o output.jpg\n\n# Multiple adjustments at once\nimgx adjust photo.jpg --brightness 10 --contrast 15 --saturation 20 --gamma 1.2 -o output.jpg\n</code></pre>"},{"location":"CLI/#grayscale-convert-to-grayscale","title":"<code>grayscale</code> - Convert to grayscale","text":"<p>Convert an image to grayscale using ITU-R BT.601 luminance weights.</p> <pre><code>imgx grayscale &lt;input&gt; [options]\n</code></pre> <p>Example:</p> <pre><code>imgx grayscale photo.jpg -o output.jpg\n</code></pre>"},{"location":"CLI/#invert-invert-colors","title":"<code>invert</code> - Invert colors","text":"<p>Invert (negate) all colors in the image to create a negative effect.</p> <pre><code>imgx invert &lt;input&gt; [options]\n</code></pre> <p>Example:</p> <pre><code>imgx invert photo.jpg -o output.jpg\n</code></pre>"},{"location":"CLI/#effects","title":"Effects","text":""},{"location":"CLI/#blur-gaussian-blur","title":"<code>blur</code> - Gaussian blur","text":"<p>Apply a Gaussian blur effect to the image. Higher sigma values produce stronger blur.</p> <pre><code>imgx blur &lt;input&gt; -s &lt;sigma&gt; [options]\n</code></pre> <p>Options: - <code>-s, --sigma &lt;float&gt;</code> - Blur strength (required, positive number, typical: 0.5-10)</p> <p>Examples:</p> <pre><code># Subtle blur\nimgx blur photo.jpg --sigma 1.5 -o output.jpg\n\n# Strong blur\nimgx blur photo.jpg -s 5.0 -o output.jpg\n</code></pre>"},{"location":"CLI/#sharpen-sharpen-image","title":"<code>sharpen</code> - Sharpen image","text":"<p>Sharpen the image using unsharp masking. Higher sigma values produce stronger sharpening.</p> <pre><code>imgx sharpen &lt;input&gt; -s &lt;sigma&gt; [options]\n</code></pre> <p>Options: - <code>-s, --sigma &lt;float&gt;</code> - Sharpening strength (required, positive number, typical: 0.5-5)</p> <p>Examples:</p> <pre><code># Moderate sharpening\nimgx sharpen photo.jpg --sigma 1.5 -o output.jpg\n\n# Strong sharpening\nimgx sharpen photo.jpg -s 3.0 -o output.jpg\n</code></pre>"},{"location":"CLI/#watermarking","title":"Watermarking","text":""},{"location":"CLI/#watermark-add-text-watermark","title":"<code>watermark</code> - Add text watermark","text":"<p>Add a text watermark to an image with configurable position, opacity, color, and padding.</p> <pre><code>imgx watermark &lt;input&gt; -t &lt;text&gt; [options]\n</code></pre> <p>Options: - <code>-t, --text &lt;string&gt;</code> - Watermark text (required) - <code>--opacity &lt;float&gt;</code> - Opacity (0.0 to 1.0, default: 0.5) - <code>-a, --anchor &lt;pos&gt;</code> - Position (default: bottomright) - <code>--color &lt;color&gt;</code> - Text color in hex (default: ffffff = white) - <code>--padding &lt;int&gt;</code> - Padding from edges in pixels (default: 10)</p> <p>Color Format: RGB hex (<code>ffffff</code>) or RGBA hex (<code>ff0000ff</code>)</p> <p>Examples:</p> <pre><code># Simple copyright watermark\nimgx watermark photo.jpg --text \"Copyright 2025\" -o output.jpg\n\n# Draft watermark in center with red color\nimgx watermark photo.jpg --text \"DRAFT\" --opacity 0.3 --anchor center --color ff0000 -o output.jpg\n\n# Top-left watermark with custom padding\nimgx watermark photo.jpg --text \"Sample\" --anchor topleft --padding 20 -o output.jpg\n\n# Semi-transparent watermark with RGBA color\nimgx watermark photo.jpg --text \"Watermark\" --color ff000080 -o output.jpg\n</code></pre>"},{"location":"CLI/#image-information","title":"Image Information","text":""},{"location":"CLI/#info-display-image-information","title":"<code>info</code> - Display image information","text":"<p>Display detailed information about an image file.</p> <pre><code>imgx info &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>-e, --extended</code> - Show extended metadata (requires exiftool)</p> <p>Output includes: - File path - Image format (JPEG, PNG, GIF, TIFF, BMP) - Dimensions (width \u00d7 height) - File size - Color model</p> <p>With <code>--extended</code> flag (requires exiftool): - Camera information and settings - GPS location data - Date/time metadata - Copyright and authorship</p> <p>Examples:</p> <pre><code># Basic info\nimgx info photo.jpg\n\n# Extended metadata\nimgx info photo.jpg --extended\n</code></pre> <p>Sample basic output:</p> <pre><code>File: photo.jpg\nFormat: JPEG\nDimensions: 1920x1080\nSize: 245.3 KB\nColor Model: *color.modelFunc\n</code></pre> <p>Sample extended output:</p> <pre><code>File: photo.jpg\nFormat: JPEG\nDimensions: 1920x1080\nSize: 245.3 KB\nColor Model: *color.modelFunc\n\nCamera:\n  Make: Canon\n  Model: Canon EOS 5D Mark IV\n\nDate Taken: 2024:10:15 14:23:45\n\nSettings:\n  Focal Length: 50.0 mm\n  Aperture: f/1.8\n  ISO: 400\n</code></pre>"},{"location":"CLI/#metadata-extract-comprehensive-metadata","title":"<code>metadata</code> - Extract comprehensive metadata","text":"<p>Extract and display comprehensive image metadata including EXIF, IPTC, and XMP data.</p> <pre><code>imgx metadata &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>-b, --basic</code> - Show basic metadata only (skip exiftool) - <code>-j, --json</code> - Output metadata as JSON</p> <p>Features:</p> <p>When exiftool is installed, displays: - Camera Information: Make, model, lens - Camera Settings: ISO, aperture (f-number), shutter speed, focal length, flash - GPS Location: Latitude, longitude, altitude - Date/Time: Original capture date, modification date - Additional Info: Software, artist, copyright - File Details: Format, dimensions, aspect ratio, megapixels, file size, color model</p> <p>When exiftool is NOT installed, displays basic metadata: - File path, format, and size - Image dimensions and aspect ratio - Megapixels and color model - Warning message with installation instructions</p> <p>Examples:</p> <pre><code># Display all available metadata\nimgx metadata photo.jpg\n\n# Show basic metadata only (skip exiftool)\nimgx metadata photo.jpg --basic\n\n# Output as JSON for parsing\nimgx metadata photo.jpg --json &gt; metadata.json\n</code></pre> <p>Sample output (with exiftool):</p> <pre><code>=== Image Metadata ===\n\nFile Information:\n  Path:        photo.jpg\n  Format:      JPEG\n  Size:        2.3 MB\n\nImage Properties:\n  Dimensions:  4000x3000\n  Aspect Ratio: 1.33\n  Megapixels:  12.00 MP\n  Color Model: *color.modelFunc\n\nCamera Information:\n  Make:        Canon\n  Model:       Canon EOS 5D Mark IV\n  Lens:        EF50mm f/1.8 STM\n\nCamera Settings:\n  Focal Length: 50.0 mm\n  Aperture:    f/1.8\n  Shutter:     1/250\n  ISO:         400\n  Flash:       No Flash\n\nDate/Time:\n  Original:    2024:10:15 14:23:45\n  Modified:    2024:10:20 09:15:30\n\nGPS Location:\n  Latitude:    37.7749 N\n  Longitude:   122.4194 W\n  Altitude:    15.0 m\n\nAdditional Information:\n  Software:    Adobe Photoshop CC 2024\n  Copyright:   \u00a9 2024 John Doe\n</code></pre> <p>Sample output (without exiftool):</p> <pre><code>=== Image Metadata ===\n\nFile Information:\n  Path:        photo.jpg\n  Format:      JPEG\n  Size:        2.3 MB\n\nImage Properties:\n  Dimensions:  4000x3000\n  Aspect Ratio: 1.33\n  Megapixels:  12.00 MP\n  Color Model: *color.modelFunc\n\n---\n\nexiftool not found. Install exiftool for comprehensive metadata.\n\nInstallation:\n  macOS:    brew install exiftool\n  Ubuntu:   sudo apt-get install libimage-exiftool-perl\n  Windows:  https://exiftool.org\n</code></pre> <p>JSON Output Example:</p> <pre><code>imgx metadata photo.jpg --json\n</code></pre> <pre><code>{\n  \"FilePath\": \"photo.jpg\",\n  \"Format\": \"JPEG\",\n  \"Width\": 4000,\n  \"Height\": 3000,\n  \"FileSize\": 2415919,\n  \"Megapixels\": 12.00,\n  \"AspectRatio\": 1.33,\n  \"HasExtended\": true,\n  \"CameraMake\": \"Canon\",\n  \"CameraModel\": \"Canon EOS 5D Mark IV\",\n  \"ISO\": \"400\",\n  \"FocalLength\": \"50.0 mm\",\n  \"DateTimeOriginal\": \"2024:10:15 14:23:45\"\n}\n</code></pre> <p>Installing exiftool:</p> <pre><code># macOS\nbrew install exiftool\n\n# Ubuntu/Debian\nsudo apt-get install libimage-exiftool-perl\n\n# Fedora/RHEL\nsudo dnf install perl-Image-ExifTool\n\n# Windows\n# Download from https://exiftool.org and add to PATH\n\n# Verify installation\nexiftool -ver\n</code></pre>"},{"location":"CLI/#object-detection","title":"Object Detection","text":""},{"location":"CLI/#detect-ai-powered-object-detection","title":"<code>detect</code> - AI-powered object detection","text":"<p>Detect objects, text, faces, and image properties using local Ollama models or cloud AI vision APIs (Google Gemini, AWS Rekognition, OpenAI Vision).</p> <pre><code>imgx detect &lt;input&gt; [options]\n</code></pre> <p>Options: - <code>-p, --provider string</code> - Detection provider: <code>ollama</code>, <code>gemini</code>, <code>google</code> (alias), <code>aws</code>, <code>openai</code> (default: <code>ollama</code>) - <code>-f, --features string</code> - Features to detect: <code>labels,text,faces,web,description,properties</code> (comma-separated, default: <code>labels</code>) - <code>-m, --max-results int</code> - Maximum number of labels to return (default: 10) - <code>-c, --confidence float</code> - Minimum confidence threshold 0.0-1.0 (default: 0.5) - <code>--prompt string</code> - Custom prompt for Ollama/Gemini/OpenAI (overrides --features) - <code>-j, --json</code> - Output results as JSON (includes colors, quality, moderation when available) - <code>--raw</code> - Include raw API response in output</p> <p>Supported Providers: - ollama (local multimodal models) - Requires <code>ollama serve</code> plus local model (default <code>gemma3</code>) - gemini (Google Gemini API) - Requires <code>GEMINI_API_KEY</code> - aws (AWS Rekognition) - Requires AWS credentials - openai (OpenAI Vision) - Requires <code>OPENAI_API_KEY</code></p> <p>Setup:</p> <pre><code># Ollama: run the local server and pull a model\nollama serve &amp;\nollama pull gemma3\n# Optional overrides\nexport OLLAMA_HOST=\"http://127.0.0.1:11434\"\nexport IMGX_OLLAMA_MODEL=\"llava\"\n\n# Gemini: Get API key from https://aistudio.google.com/\nexport GEMINI_API_KEY=\"your-api-key\"\n\n# AWS: Configure via AWS CLI or environment variables\naws configure\n# OR\nexport AWS_ACCESS_KEY_ID=\"your-key\"\nexport AWS_SECRET_ACCESS_KEY=\"your-secret\"\nexport AWS_REGION=\"us-east-1\"\n\n# OpenAI: Get API key from https://platform.openai.com/\nexport OPENAI_API_KEY=\"sk-...\"\n</code></pre> <p>Available Features: - <code>labels</code> - Detect objects and labels - <code>text</code> - Extract text (OCR) - <code>faces</code> - Detect faces and attributes - <code>description</code> - Get natural language description (Ollama/Gemini/OpenAI) - <code>web</code> - Web entities and similar images (Gemini only) - <code>landmarks</code> - Detect famous landmarks (Gemini only) - <code>properties</code> - Image quality, colors, sharpness (Ollama/AWS) - <code>safesearch</code> - Content moderation</p> <p>Examples:</p> <pre><code># Basic detection with the local Ollama model (default)\nimgx detect photo.jpg\n\n# Use specific provider\nimgx detect photo.jpg --provider aws\n\n# Multiple features\nimgx detect document.jpg --features labels,text,faces\n\n# AWS image properties (colors, quality)\nimgx detect photo.jpg --provider aws --features properties\n\n# AWS labels + properties (charged for both)\nimgx detect photo.jpg --provider aws --features labels,properties\n\n# Custom prompt with Ollama or Gemini\nimgx detect dog.jpg --prompt \"What breed is this dog?\"\n\n# Higher confidence threshold\nimgx detect photo.jpg --confidence 0.8\n\n# JSON output\nimgx detect photo.jpg --json\n\n# Compare providers\nimgx detect photo.jpg --provider ollama\nimgx detect photo.jpg --provider gemini\nimgx detect photo.jpg --provider aws\nimgx detect photo.jpg --provider openai\n</code></pre> <p>Sample Output (pretty format):</p> <pre><code>=== Object Detection Results (aws) ===\n\nLabels:\n  1. Dog (99.0% confidence)\n  2. Pet (97.6% confidence)\n  3. Animal (96.3% confidence)\n\nDetected Text:\n  1. \"Backyard\" (88.0% confidence)\n\nProperties:\n  brightness: 84.50\n  contrast: 76.20\n  foreground_color: Green\n\nDominant Colors:\n  - Green (#8FB94B, rgb(143,185,75), 41.3%)\n  - Brown (#6B4E2E, rgb(107,78,46), 18.6%)\n\nImage Quality:\n  Brightness: 84.50\n  Contrast: 76.20\n  Sharpness: 80.10\n  Foreground:\n    Brightness: 81.20\n    Color: Green\n\nModeration:\n  - Violence (severity: VERY_UNLIKELY, confidence: 0.5%)\n\nSafe Search Summary:\n  - Violence (VERY_UNLIKELY, 0.5%)\n\nOverall Confidence: 97.6%\n\nProcessed at: 2024-11-01 16:30:45\n</code></pre> <p>JSON Output Example:</p> <pre><code>{\n  \"provider\": \"gemini\",\n  \"labels\": [\n    {\n      \"name\": \"Dog\",\n      \"confidence\": 0.985,\n      \"categories\": [\"Animal\", \"Pet\"]\n    },\n    {\n      \"name\": \"Golden Retriever\",\n      \"confidence\": 0.942,\n      \"categories\": [\"Dog\", \"Breed\"]\n    }\n  ],\n  \"confidence\": 0.934,\n  \"processed_at\": \"2024-11-01T16:30:45Z\"\n}\n</code></pre> <p>AWS Image Properties Output:</p> <pre><code>imgx detect photo.jpg --provider aws --features properties\n\n# Output:\nProvider: aws\nProcessed: 2024-11-01 16:30:45\n\nImage Properties:\n  brightness: 75.23\n  sharpness: 89.15\n  contrast: 62.45\n  dominant_colors: Black(45.2%), White(23.1%), Blue(15.7%)\n  color_1_hex: #0C0F12\n  color_1_rgb: rgb(12,15,18)\n  color_2_hex: #F5F5F5\n  color_2_rgb: rgb(245,245,245)\n  foreground_color: Black\n  background_color: White\n</code></pre> <p>Text Extraction Example:</p> <pre><code>imgx detect document.jpg --features text\n\n# Output:\nProvider: gemini\nProcessed: 2024-11-01 16:30:45\n\nText Detected:\n  - \"Invoice\" (confidence: 99.2%)\n  - \"Total: $152.50\" (confidence: 98.7%)\n  - \"Date: 2024-10-15\" (confidence: 97.5%)\n</code></pre> <p>Face Detection Example:</p> <pre><code>imgx detect group-photo.jpg --features faces\n\n# Output:\nProvider: aws\nProcessed: 2024-11-01 16:30:45\n\nFaces Detected: 3\n  Face 1: confidence 99.8%, age 25-35, smiling\n  Face 2: confidence 99.5%, age 30-40, neutral\n  Face 3: confidence 98.9%, age 20-30, happy\n</code></pre> <p>Pricing Notes:</p> <ul> <li>Gemini: Free tier available, then pay-as-you-go</li> <li>AWS Rekognition:</li> <li><code>--features labels</code> \u2192 Standard DetectLabels pricing (~$0.001/image)</li> <li><code>--features properties</code> \u2192 Image Properties pricing only</li> <li><code>--features labels,properties</code> \u2192 Charged for BOTH APIs</li> <li>OpenAI Vision: Per-request pricing based on GPT-4o</li> </ul> <p>Troubleshooting:</p> <pre><code># Test Gemini credentials\necho $GEMINI_API_KEY\n\n# Test AWS credentials\naws sts get-caller-identity\n\n# Test OpenAI credentials\necho $OPENAI_API_KEY\n</code></pre> <p>See Also: - Detailed API documentation: docs/DETECTION.md - Example Code</p>"},{"location":"CLI/#common-use-cases","title":"Common Use Cases","text":""},{"location":"CLI/#web-optimization","title":"Web Optimization","text":"<pre><code># Resize for web and optimize JPEG quality\nimgx resize photo.jpg -w 1200 --quality 85 -o web.jpg\n\n# Create responsive image set\nimgx resize photo.jpg -w 1920 -o photo-large.jpg\nimgx resize photo.jpg -w 1200 -o photo-medium.jpg\nimgx resize photo.jpg -w 800 -o photo-small.jpg\n</code></pre>"},{"location":"CLI/#social-media","title":"Social Media","text":"<pre><code># Instagram post (1080x1080)\nimgx fill photo.jpg -w 1080 -h 1080 -o instagram.jpg\n\n# Facebook cover (1200x630)\nimgx fill photo.jpg -w 1200 -h 630 -o facebook-cover.jpg\n\n# Twitter header (1500x500)\nimgx fill photo.jpg -w 1500 -h 500 -o twitter-header.jpg\n</code></pre>"},{"location":"CLI/#photo-enhancement","title":"Photo Enhancement","text":"<pre><code># Quick enhancement\nimgx adjust photo.jpg --brightness 5 --contrast 10 --saturation 15 -o enhanced.jpg\n\n# Fix dark photo\nimgx adjust photo.jpg --brightness 20 --gamma 1.3 -o brightened.jpg\n\n# Boost colors\nimgx adjust photo.jpg --saturation 25 --contrast 10 -o vibrant.jpg\n</code></pre>"},{"location":"CLI/#thumbnails","title":"Thumbnails","text":"<pre><code># Square thumbnails\nimgx thumbnail photo.jpg -s 150 -o thumb-150.jpg\nimgx thumbnail photo.jpg -s 300 -o thumb-300.jpg\n\n# Preserve aspect ratio thumbnails\nimgx resize photo.jpg -w 300 -o thumb.jpg\n</code></pre>"},{"location":"CLI/#watermarking_1","title":"Watermarking","text":"<pre><code># Copyright watermark\nimgx watermark photo.jpg --text \"\u00a9 2025 Your Name\" --opacity 0.4 -o watermarked.jpg\n\n# Draft stamp\nimgx watermark document.jpg --text \"DRAFT\" --anchor center --opacity 0.3 --color ff0000 -o draft.jpg\n\n# Bottom-left attribution\nimgx watermark photo.jpg --text \"Photo by You\" --anchor bottomleft --padding 15 -o attributed.jpg\n</code></pre>"},{"location":"CLI/#creative-effects","title":"Creative Effects","text":"<pre><code># Soft focus effect\nimgx blur photo.jpg --sigma 3.0 -o soft-focus.jpg\n\n# High contrast black and white\nimgx grayscale photo.jpg -o bw.jpg\nimgx adjust bw.jpg --contrast 30 -o high-contrast-bw.jpg\n\n# Vintage look\nimgx adjust photo.jpg --saturation -20 --contrast -10 --gamma 1.2 -o vintage.jpg\n\n# Inverted colors (negative)\nimgx invert photo.jpg -o negative.jpg\n</code></pre>"},{"location":"CLI/#tips-tricks","title":"Tips &amp; Tricks","text":""},{"location":"CLI/#auto-generated-output-names","title":"Auto-generated Output Names","text":"<p>If you don't specify an output file with <code>-o</code>, imgx automatically generates one by adding a suffix:</p> <pre><code>imgx resize photo.jpg -w 800\n# Creates: photo-resized.jpg\n\nimgx thumbnail photo.jpg -s 150\n# Creates: photo-thumb.jpg\n\nimgx grayscale photo.jpg\n# Creates: photo-grayscale.jpg\n</code></pre>"},{"location":"CLI/#format-conversion","title":"Format Conversion","text":"<p>Convert between formats using the <code>--format</code> flag:</p> <pre><code># PNG to JPEG\nimgx resize photo.png -w 800 --format jpg --quality 90 -o output.jpg\n\n# JPEG to PNG\nimgx resize photo.jpg -w 800 --format png -o output.png\n</code></pre>"},{"location":"CLI/#preserving-quality","title":"Preserving Quality","text":"<p>For JPEG output, use high quality settings to preserve detail:</p> <pre><code># High quality (larger file)\nimgx resize photo.jpg -w 1920 --quality 95 -o output.jpg\n\n# Balanced quality\nimgx resize photo.jpg -w 1920 --quality 85 -o output.jpg\n\n# Web optimized\nimgx resize photo.jpg -w 1920 --quality 75 -o output.jpg\n</code></pre>"},{"location":"CLI/#chaining-operations","title":"Chaining Operations","text":"<p>While command chaining is planned for a future release, you can currently chain operations using shell pipes or by saving intermediate files:</p> <pre><code># Method 1: Multiple commands\nimgx resize photo.jpg -w 800 -o temp.jpg\nimgx adjust temp.jpg --brightness 10 --contrast 20 -o final.jpg\nrm temp.jpg\n\n# Method 2: Multiple adjustments in one command\nimgx adjust photo.jpg --brightness 10 --contrast 20 --saturation 15 -o adjusted.jpg\n</code></pre>"},{"location":"CLI/#verbose-mode","title":"Verbose Mode","text":"<p>Use verbose mode (<code>-v</code>) to see what operations are being performed:</p> <pre><code>imgx adjust photo.jpg --brightness 10 --contrast 20 -v -o output.jpg\n# Output:\n# Loaded: photo.jpg (1920x1080)\n# Applying brightness: 10.0\n# Applying contrast: 20.0\n# Saving: output.jpg (1920x1080)\n# Saved: output.jpg\n</code></pre>"},{"location":"CLI/#resampling-filters","title":"Resampling Filters","text":"<p>Choose the right filter for your use case:</p> <ul> <li>Lanczos (default): Best quality for most photographic images</li> <li>CatmullRom: Fast, sharp results similar to Lanczos</li> <li>MitchellNetravali: Smoother results with less ringing</li> <li>Linear: Fast bilinear resampling, good for quick previews</li> <li>Box: Fast averaging, good for downscaling</li> <li>Nearest: Fastest, no antialiasing (pixelated for photos)</li> </ul> <pre><code># High quality photographic resize\nimgx resize photo.jpg -w 800 -f lanczos -o output.jpg\n\n# Fast resize for previews\nimgx resize photo.jpg -w 800 -f linear -o preview.jpg\n\n# Pixel art (no smoothing)\nimgx resize pixelart.png -w 800 -f nearest -o scaled-pixelart.png\n</code></pre>"},{"location":"CLI/#getting-help","title":"Getting Help","text":"<p>imgx provides comprehensive help at every level.</p>"},{"location":"CLI/#general-help","title":"General Help","text":"<pre><code># Show all commands\nimgx --help\nimgx -h\n\n# Version information\nimgx --version\n</code></pre>"},{"location":"CLI/#command-specific-help","title":"Command-Specific Help","text":"<p>There are two ways to get help for a specific command:</p> <p>Method 1: <code>help</code> before the command name <pre><code>imgx help resize\nimgx help adjust\nimgx help watermark\n</code></pre></p> <p>Method 2: <code>--help</code> flag after the command name (also shows global options) <pre><code>imgx resize --help\nimgx adjust --help\nimgx watermark --help\n</code></pre></p> <p>Note: Don't use <code>imgx &lt;command&gt; help</code> (help after the command) - this syntax doesn't work correctly.</p>"},{"location":"CLI/#shell-completion-scripts","title":"Shell Completion Scripts","text":"<pre><code>imgx completion bash\nimgx completion zsh\nimgx completion fish\nimgx completion pwsh\n</code></pre>"},{"location":"CLI/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Error (invalid arguments, file not found, processing error, etc.)</li> </ul>"},{"location":"CLI/#supported-formats","title":"Supported Formats","text":"<p>Input formats: JPEG, PNG, GIF, TIFF, BMP Output formats: JPEG, PNG, GIF, TIFF, BMP</p> <p>Format is automatically detected from file extension or can be forced with <code>--format</code> flag.</p>"},{"location":"DETECTION/","title":"Image Detection API Documentation","text":"<p>Advanced AI-powered object detection for images using local Ollama models, Google Gemini, AWS Rekognition, and OpenAI Vision APIs.</p>"},{"location":"DETECTION/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Supported Providers</li> <li>Setup &amp; Authentication</li> <li>Quick Start</li> <li>Detection Features</li> <li>API Reference</li> <li>Examples</li> <li>Best Practices</li> <li>Pricing Considerations</li> <li>Troubleshooting</li> </ul>"},{"location":"DETECTION/#overview","title":"Overview","text":"<p>The detection package provides a unified interface for multiple AI vision providers, allowing you to: - Detect objects and labels in images - Extract text (OCR) - Detect faces and facial attributes - Analyze image properties (colors, quality, sharpness) - Check for inappropriate content - Get natural language descriptions</p> <p>All providers return results in a consistent format, making it easy to switch between providers or compare results.</p>"},{"location":"DETECTION/#supported-providers","title":"Supported Providers","text":"Provider API Key Required Features Ollama (default) None (local server) Labels, Text, Faces, Description, Moderation Google Gemini <code>GEMINI_API_KEY</code> Labels, Text, Faces, Description, Web detection, Landmarks AWS Rekognition AWS credentials Labels, Text, Faces, Image Properties, Moderation OpenAI Vision <code>OPENAI_API_KEY</code> Labels, Description, Text, Faces (via GPT-4o)"},{"location":"DETECTION/#setup-authentication","title":"Setup &amp; Authentication","text":""},{"location":"DETECTION/#ollama-local","title":"Ollama (Local)","text":"<ol> <li>Install Ollama and start the daemon: <pre><code>ollama serve\n</code></pre></li> <li>Pull the default multimodal model: <pre><code>ollama pull gemma3\n</code></pre></li> <li>(Optional) Override the host or model: <pre><code>export OLLAMA_HOST=\"http://192.168.1.50:11434\"\nexport IMGX_OLLAMA_MODEL=\"llava\"\n</code></pre></li> </ol>"},{"location":"DETECTION/#google-gemini","title":"Google Gemini","text":"<ol> <li>Get API key from Google AI Studio</li> <li>Set environment variable: <pre><code>export GEMINI_API_KEY=\"your-api-key\"\n</code></pre></li> </ol>"},{"location":"DETECTION/#aws-rekognition","title":"AWS Rekognition","text":"<p>AWS uses the standard credential chain:</p> <p>Option 1: Environment Variables <pre><code>export AWS_ACCESS_KEY_ID=\"your-key\"\nexport AWS_SECRET_ACCESS_KEY=\"your-secret\"\nexport AWS_REGION=\"us-east-1\"\n</code></pre></p> <p>Option 2: AWS CLI Configuration <pre><code>aws configure\n</code></pre></p> <p>Option 3: AWS Profile <pre><code>export AWS_PROFILE=\"myprofile\"\n</code></pre></p> <p>Option 4: IAM Roles (automatic on EC2/ECS/Lambda)</p>"},{"location":"DETECTION/#openai-vision","title":"OpenAI Vision","text":"<ol> <li>Get API key from OpenAI Platform</li> <li>Set environment variable: <pre><code>export OPENAI_API_KEY=\"sk-...\"\n</code></pre></li> </ol>"},{"location":"DETECTION/#quick-start","title":"Quick Start","text":"<pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"log\"\n\n    \"github.com/razzkumar/imgx\"\n)\n\nfunc main() {\n    // Load an image\n    img, err := imgx.Load(\"photo.jpg\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Detect objects using the default local Ollama model\n    ctx := context.Background()\n    result, err := img.Detect(ctx, \"ollama\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // Print detected labels\n    fmt.Println(\"Detected objects:\")\n    for _, label := range result.Labels {\n        fmt.Printf(\"- %s (%.1f%% confidence)\\n\",\n            label.Name, label.Confidence*100)\n    }\n}\n</code></pre>"},{"location":"DETECTION/#detection-features","title":"Detection Features","text":""},{"location":"DETECTION/#available-features","title":"Available Features","text":"<pre><code>const (\n    FeatureLabels      Feature = \"labels\"       // Object/label detection\n    FeatureObjects     Feature = \"objects\"      // Alias for labels\n    FeatureText        Feature = \"text\"         // OCR text extraction\n    FeatureFaces       Feature = \"faces\"        // Face detection\n    FeatureDescription Feature = \"description\"  // Natural language description\n    FeatureWeb         Feature = \"web\"          // Web entities (Gemini only)\n    FeatureLandmarks   Feature = \"landmarks\"    // Landmark detection (Gemini only)\n    FeatureProperties  Feature = \"properties\"   // Image properties (AWS only)\n    FeatureSafeSearch  Feature = \"safesearch\"   // Content moderation\n)\n</code></pre>"},{"location":"DETECTION/#feature-support-matrix","title":"Feature Support Matrix","text":"Feature Ollama Gemini AWS OpenAI Labels \u2705 \u2705 \u2705 \u2705 Text (OCR) \u2705 \u2705 \u2705 \u2705 Faces \u2705 \u2705 \u2705 \u2705 Description \u2705 \u2705 \u274c \u2705 Web Detection \u274c \u2705 \u274c \u274c Landmarks \u274c \u2705 \u274c \u274c Properties \u2705 \u274c \u2705 \u274c SafeSearch/Moderation \u2705 \u2705 \u2705 \u2705"},{"location":"DETECTION/#api-reference","title":"API Reference","text":""},{"location":"DETECTION/#core-types","title":"Core Types","text":""},{"location":"DETECTION/#detectionresult","title":"DetectionResult","text":"<pre><code>type DetectionResult struct {\n    Provider      string                 // Provider used (ollama, gemini, aws, openai)\n    Labels        []Label                // Detected objects/labels\n    Description   string                 // Natural language description\n    Text          []TextBlock            // Extracted text\n    Faces         []Face                 // Detected faces\n    Web           *WebDetection          // Web entities (Gemini)\n    BoundingBoxes []BoundingBox          // Object locations\n    Properties    map[string]string      // Image properties (AWS)\n    Confidence    float32                // Overall confidence (0.0-1.0)\n    ProcessedAt   time.Time              // Processing timestamp\n    RawResponse   string                 // Raw API response (if requested)\n}\n</code></pre>"},{"location":"DETECTION/#label","title":"Label","text":"<pre><code>type Label struct {\n    Name       string   // Label name (e.g., \"Dog\", \"Car\")\n    Confidence float32  // Confidence score (0.0-1.0)\n    Categories []string // Parent categories\n}\n</code></pre>"},{"location":"DETECTION/#textblock","title":"TextBlock","text":"<pre><code>type TextBlock struct {\n    Text       string       // Extracted text\n    Confidence float32      // Confidence score (0.0-1.0)\n    BoundingBox *BoundingBox // Text location\n    Language   string       // Detected language (if available)\n}\n</code></pre>"},{"location":"DETECTION/#face","title":"Face","text":"<pre><code>type Face struct {\n    Confidence  float32            // Confidence score (0.0-1.0)\n    BoundingBox *BoundingBox       // Face location\n    Landmarks   []FaceLandmark     // Facial landmarks (eyes, nose, etc.)\n    Emotions    map[string]float32 // Emotion scores\n    AgeRange    string             // Estimated age range\n    Gender      string             // Detected gender\n}\n</code></pre>"},{"location":"DETECTION/#detection-options","title":"Detection Options","text":"<pre><code>type DetectOptions struct {\n    Features           []Feature // Features to detect\n    MaxResults         int       // Maximum labels to return (default: 10)\n    MinConfidence      float32   // Minimum confidence threshold (0.0-1.0, default: 0.5)\n    CustomPrompt       string    // Custom prompt (Gemini/OpenAI)\n    IncludeRawResponse bool      // Include raw API response\n}\n\n// Create default options\nopts := detection.DefaultDetectOptions()\n\n// Customize options\nopts := &amp;detection.DetectOptions{\n    Features:      []detection.Feature{detection.FeatureLabels, detection.FeatureText},\n    MaxResults:    20,\n    MinConfidence: 0.7,\n}\n</code></pre>"},{"location":"DETECTION/#methods","title":"Methods","text":""},{"location":"DETECTION/#imagedetect","title":"Image.Detect()","text":"<pre><code>func (img *Image) Detect(ctx context.Context, provider string,\n    opts ...*detection.DetectOptions) (*detection.DetectionResult, error)\n</code></pre> <p>High-level method on <code>*imgx.Image</code> instances.</p> <p>Parameters: - <code>ctx</code>: Context for cancellation and timeouts - <code>provider</code>: Provider name (\"ollama\", \"gemma3\", \"qwen3-vl\", \"gemini\", \"google\", \"aws\", \"rekognition\", \"openai\") - <code>opts</code>: Optional detection options</p> <p>Returns: - <code>*DetectionResult</code>: Detection results - <code>error</code>: Error if detection fails</p>"},{"location":"DETECTION/#provider-interface","title":"Provider Interface","text":"<pre><code>type Provider interface {\n    Detect(ctx context.Context, img *image.NRGBA,\n        opts *DetectOptions) (*DetectionResult, error)\n    Name() string\n    IsConfigured() bool\n}\n</code></pre> <p>Direct provider access for advanced use cases:</p> <pre><code>provider, err := detection.GetProvider(\"ollama\")\nif err != nil {\n    log.Fatal(err)\n}\n\nresult, err := provider.Detect(ctx, img.ToNRGBA(), opts)\n</code></pre>"},{"location":"DETECTION/#examples","title":"Examples","text":""},{"location":"DETECTION/#basic-detection","title":"Basic Detection","text":"<pre><code>img, _ := imgx.Load(\"photo.jpg\")\nctx := context.Background()\n\nresult, err := img.Detect(ctx, \"ollama\")\nif err != nil {\n    log.Fatal(err)\n}\n\nfor _, label := range result.Labels {\n    fmt.Printf(\"%s: %.1f%%\\n\", label.Name, label.Confidence*100)\n}\n</code></pre>"},{"location":"DETECTION/#multiple-features","title":"Multiple Features","text":"<pre><code>opts := &amp;detection.DetectOptions{\n    Features: []detection.Feature{\n        detection.FeatureLabels,\n        detection.FeatureText,\n        detection.FeatureFaces,\n    },\n    MaxResults:    15,\n    MinConfidence: 0.7,\n}\n\nresult, err := img.Detect(ctx, \"aws\", opts)\nif err != nil {\n    log.Fatal(err)\n}\n\n// Labels\nfmt.Println(\"Objects:\", len(result.Labels))\n\n// Text extraction\nfmt.Println(\"Text found:\")\nfor _, text := range result.Text {\n    fmt.Printf(\"- %s\\n\", text.Text)\n}\n\n// Faces\nfmt.Printf(\"Found %d faces\\n\", len(result.Faces))\n</code></pre>"},{"location":"DETECTION/#aws-image-properties","title":"AWS Image Properties","text":"<pre><code>// Get image quality metrics and dominant colors\nopts := &amp;detection.DetectOptions{\n    Features: []detection.Feature{detection.FeatureProperties},\n}\n\nresult, err := img.Detect(ctx, \"aws\", opts)\nif err != nil {\n    log.Fatal(err)\n}\n\n// Access properties\nfmt.Println(\"Brightness:\", result.Properties[\"brightness\"])\nfmt.Println(\"Sharpness:\", result.Properties[\"sharpness\"])\nfmt.Println(\"Contrast:\", result.Properties[\"contrast\"])\nfmt.Println(\"Dominant colors:\", result.Properties[\"dominant_colors\"])\nfmt.Println(\"Color 1 (hex):\", result.Properties[\"color_1_hex\"])\nfmt.Println(\"Color 1 (rgb):\", result.Properties[\"color_1_rgb\"])\n</code></pre>"},{"location":"DETECTION/#custom-prompt-geminiopenai","title":"Custom Prompt (Gemini/OpenAI)","text":"<pre><code>opts := &amp;detection.DetectOptions{\n    CustomPrompt: \"Is there a dog in this image? What breed might it be?\",\n}\n\nresult, err := img.Detect(ctx, \"gemini\", opts)\nif err != nil {\n    log.Fatal(err)\n}\n\nfmt.Println(\"Description:\", result.Description)\n</code></pre>"},{"location":"DETECTION/#compare-multiple-providers","title":"Compare Multiple Providers","text":"<pre><code>providers := []string{\"gemini\", \"aws\", \"openai\"}\n\nfor _, provider := range providers {\n    result, err := img.Detect(ctx, provider)\n    if err != nil {\n        fmt.Printf(\"%s error: %v\\n\", provider, err)\n        continue\n    }\n\n    fmt.Printf(\"\\n%s results:\\n\", strings.ToUpper(provider))\n    for _, label := range result.Labels[:5] {\n        fmt.Printf(\"  - %s (%.1f%%)\\n\", label.Name, label.Confidence*100)\n    }\n}\n</code></pre>"},{"location":"DETECTION/#error-handling","title":"Error Handling","text":"<pre><code>result, err := img.Detect(ctx, \"aws\")\nif err != nil {\n    // Check for specific error types\n    if errors.Is(err, detection.ErrProviderNotConfigured) {\n        log.Fatal(\"AWS credentials not configured. Run: aws configure\")\n    }\n\n    // Check error message for details\n    if strings.Contains(err.Error(), \"invalid credentials\") {\n        log.Fatal(\"AWS credentials are invalid or expired\")\n    }\n\n    log.Fatal(err)\n}\n</code></pre>"},{"location":"DETECTION/#with-context-timeout","title":"With Context Timeout","text":"<pre><code>// Set 10 second timeout\nctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\ndefer cancel()\n\nresult, err := img.Detect(ctx, \"gemini\")\nif err != nil {\n    if errors.Is(err, context.DeadlineExceeded) {\n        log.Fatal(\"Detection timed out\")\n    }\n    log.Fatal(err)\n}\n</code></pre>"},{"location":"DETECTION/#batch-processing","title":"Batch Processing","text":"<pre><code>images := []string{\"photo1.jpg\", \"photo2.jpg\", \"photo3.jpg\"}\nctx := context.Background()\n\nfor _, imagePath := range images {\n    img, err := imgx.Load(imagePath)\n    if err != nil {\n        log.Printf(\"Failed to load %s: %v\", imagePath, err)\n        continue\n    }\n\n    result, err := img.Detect(ctx, \"gemini\")\n    if err != nil {\n        log.Printf(\"Failed to detect %s: %v\", imagePath, err)\n        continue\n    }\n\n    fmt.Printf(\"\\n%s:\\n\", imagePath)\n    for i, label := range result.Labels {\n        if i &gt;= 3 { break } // Top 3 labels\n        fmt.Printf(\"  %s (%.1f%%)\\n\", label.Name, label.Confidence*100)\n    }\n}\n</code></pre>"},{"location":"DETECTION/#best-practices","title":"Best Practices","text":""},{"location":"DETECTION/#1-choose-the-right-provider","title":"1. Choose the Right Provider","text":"<ul> <li>Gemini: Best for general-purpose detection, custom prompts, and web entity detection</li> <li>AWS Rekognition: Best for production workloads, image properties, and when you need reliable face detection</li> <li>OpenAI Vision: Best for natural language descriptions and when you need GPT-4o's reasoning</li> </ul>"},{"location":"DETECTION/#2-set-appropriate-confidence-thresholds","title":"2. Set Appropriate Confidence Thresholds","text":"<pre><code>// For critical applications, use higher confidence\nopts := &amp;detection.DetectOptions{\n    MinConfidence: 0.8, // Only high-confidence results\n}\n\n// For exploratory analysis, use lower confidence\nopts := &amp;detection.DetectOptions{\n    MinConfidence: 0.3, // Catch more possibilities\n}\n</code></pre>"},{"location":"DETECTION/#3-handle-rate-limits","title":"3. Handle Rate Limits","text":"<pre><code>import \"time\"\n\nfor _, img := range images {\n    result, err := img.Detect(ctx, \"gemini\")\n    if err != nil {\n        if strings.Contains(err.Error(), \"rate limit\") {\n            time.Sleep(2 * time.Second)\n            result, err = img.Detect(ctx, \"gemini\") // Retry\n        }\n        if err != nil {\n            log.Printf(\"Error: %v\", err)\n            continue\n        }\n    }\n    // Process result...\n}\n</code></pre>"},{"location":"DETECTION/#4-use-context-for-cancellation","title":"4. Use Context for Cancellation","text":"<pre><code>ctx, cancel := context.WithCancel(context.Background())\n\n// Cancel on Ctrl+C\ngo func() {\n    sigChan := make(chan os.Signal, 1)\n    signal.Notify(sigChan, os.Interrupt)\n    &lt;-sigChan\n    cancel()\n}()\n\nresult, err := img.Detect(ctx, \"gemini\")\n</code></pre>"},{"location":"DETECTION/#5-cache-results","title":"5. Cache Results","text":"<pre><code>type DetectionCache struct {\n    mu    sync.RWMutex\n    cache map[string]*detection.DetectionResult\n}\n\nfunc (c *DetectionCache) Get(key string) (*detection.DetectionResult, bool) {\n    c.mu.RLock()\n    defer c.mu.RUnlock()\n    result, ok := c.cache[key]\n    return result, ok\n}\n\nfunc (c *DetectionCache) Set(key string, result *detection.DetectionResult) {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    c.cache[key] = result\n}\n</code></pre>"},{"location":"DETECTION/#pricing-considerations","title":"Pricing Considerations","text":""},{"location":"DETECTION/#aws-rekognition_1","title":"AWS Rekognition","text":"<p>Important: The <code>properties</code> feature has separate pricing.</p> <ul> <li>Labels only: <code>--features labels</code> \u2192 Standard DetectLabels pricing</li> <li>Properties only: <code>--features properties</code> \u2192 Image Properties pricing only</li> <li>Both: <code>--features labels,properties</code> \u2192 Charged for BOTH APIs</li> </ul> <p>Example costs (as of 2024): - DetectLabels: ~$0.001 per image (first 1M images/month) - Image Properties: Additional charge when combined with labels - DetectText, DetectFaces: Separate pricing</p> <p>Recommendation: Only request properties when needed to minimize costs.</p>"},{"location":"DETECTION/#gemini","title":"Gemini","text":"<ul> <li>Free tier available with rate limits</li> <li>Pay-as-you-go pricing after free tier</li> <li>Custom prompts may use more tokens</li> </ul>"},{"location":"DETECTION/#openai-vision_1","title":"OpenAI Vision","text":"<ul> <li>Charged per API call</li> <li>GPT-4o has different pricing than GPT-4</li> <li>Image size affects cost</li> </ul>"},{"location":"DETECTION/#troubleshooting","title":"Troubleshooting","text":""},{"location":"DETECTION/#common-issues","title":"Common Issues","text":""},{"location":"DETECTION/#1-provider-not-configured","title":"1. \"Provider not configured\"","text":"<p>Gemini: <pre><code># Check if key is set\necho $GEMINI_API_KEY\n\n# Set the key\nexport GEMINI_API_KEY=\"your-key\"\n</code></pre></p> <p>AWS: <pre><code># Test credentials\naws sts get-caller-identity\n\n# If that fails, run\naws configure\n</code></pre></p> <p>OpenAI: <pre><code># Check if key is set\necho $OPENAI_API_KEY\n\n# Set the key\nexport OPENAI_API_KEY=\"sk-...\"\n</code></pre></p>"},{"location":"DETECTION/#2-invalid-aws-credentials","title":"2. \"Invalid AWS credentials\"","text":"<p>This error means your AWS credentials are incorrect or expired.</p> <pre><code># Verify credentials are correct\naws sts get-caller-identity\n\n# If using temporary credentials, they may have expired\n# Get new credentials from your IAM administrator\n\n# Check which credential source is being used\nAWS_PROFILE=default aws sts get-caller-identity\n</code></pre>"},{"location":"DETECTION/#3-access-denied-aws","title":"3. \"Access denied\" (AWS)","text":"<p>Your IAM user/role lacks necessary permissions.</p> <p>Required IAM permissions: <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"rekognition:DetectLabels\",\n        \"rekognition:DetectText\",\n        \"rekognition:DetectFaces\",\n        \"rekognition:DetectModerationLabels\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"DETECTION/#4-rate-limiting","title":"4. Rate Limiting","text":"<p>If you hit rate limits, implement exponential backoff:</p> <pre><code>func detectWithRetry(img *imgx.Image, ctx context.Context, provider string) (*detection.DetectionResult, error) {\n    maxRetries := 3\n    baseDelay := time.Second\n\n    for i := 0; i &lt; maxRetries; i++ {\n        result, err := img.Detect(ctx, provider)\n        if err == nil {\n            return result, nil\n        }\n\n        if !strings.Contains(err.Error(), \"rate limit\") {\n            return nil, err\n        }\n\n        if i &lt; maxRetries-1 {\n            delay := baseDelay * time.Duration(1&lt;&lt;uint(i))\n            time.Sleep(delay)\n        }\n    }\n\n    return nil, fmt.Errorf(\"max retries exceeded\")\n}\n</code></pre>"},{"location":"DETECTION/#5-large-images","title":"5. Large Images","text":"<p>If you get errors about image size:</p> <pre><code>// Resize large images before detection\nif img.Bounds().Dx() &gt; 2048 || img.Bounds().Dy() &gt; 2048 {\n    img = img.Fit(2048, 2048, imgx.Lanczos)\n}\n\nresult, err := img.Detect(ctx, \"gemini\")\n</code></pre>"},{"location":"DETECTION/#additional-resources","title":"Additional Resources","text":"<ul> <li>Google Gemini API Documentation</li> <li>AWS Rekognition Documentation</li> <li>OpenAI Vision API Documentation</li> <li>imgx GitHub Repository</li> <li>Example Code</li> </ul>"},{"location":"DETECTION/#see-also","title":"See Also","text":"<ul> <li>CLI Documentation - Command-line usage</li> <li>Main README - Library overview</li> <li>Versioning - Version management</li> </ul>"},{"location":"RELEASING/","title":"Releasing imgx","text":"<p>Quick guide for maintainers on how to release new versions.</p>"},{"location":"RELEASING/#quick-release","title":"Quick Release","text":"<pre><code># 1. Make sure main branch is up to date\ngit checkout main\ngit pull\n\n# 2. Run tests\ngo test ./...\n\n# 3. Create and push a tag (GitHub Actions does the rest!)\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\ngit push origin v1.1.0\n</code></pre> <p>That's it! GitHub Actions will automatically: - \u2705 Update version in code files - \u2705 Commit changes back to main - \u2705 Build binaries for all platforms - \u2705 Create GitHub release</p>"},{"location":"RELEASING/#what-happens-automatically","title":"What Happens Automatically","text":"<p>When you push a tag like <code>v1.1.0</code>, the release workflow:</p> <ol> <li>Extracts Version</li> <li> <p>Tag: <code>v1.1.0</code> \u2192 Version: <code>1.1.0</code></p> </li> <li> <p>Updates Files</p> </li> <li><code>version.go</code>: <code>const Version = \"1.1.0\"</code></li> <li> <p><code>VERSION</code>: <code>1.1.0</code></p> </li> <li> <p>Commits Back to Main <pre><code>chore: bump version to v1.1.0 [skip ci]\n</code></pre></p> </li> <li> <p>Builds Binaries</p> </li> <li>Linux: amd64, arm64</li> <li>macOS: amd64, arm64</li> <li> <p>Windows: amd64</p> </li> <li> <p>Creates Release</p> </li> <li>GitHub release with all binaries</li> <li>Checksums and SBOMs</li> <li>Release notes</li> </ol>"},{"location":"RELEASING/#pre-release-checklist","title":"Pre-Release Checklist","text":"<p>Before creating a release tag:</p> <ul> <li>[ ] All tests pass: <code>go test ./...</code></li> <li>[ ] CLI builds: <code>go build ./cmd/imgx</code></li> <li>[ ] CLI works: <code>./imgx --version</code></li> <li>[ ] Examples work: <code>go run examples/author/main.go</code></li> <li>[ ] Documentation is updated</li> <li>[ ] CHANGELOG is updated (if you maintain one)</li> <li>[ ] No uncommitted changes: <code>git status</code></li> </ul>"},{"location":"RELEASING/#version-numbers","title":"Version Numbers","text":"<p>Follow Semantic Versioning:</p> <ul> <li>v1.0.0 \u2192 v2.0.0 - Breaking changes</li> <li> <p>Example: Removed <code>Options</code> field, changed function signature</p> </li> <li> <p>v1.0.0 \u2192 v1.1.0 - New features</p> </li> <li> <p>Example: Added new image filter, new CLI command</p> </li> <li> <p>v1.0.0 \u2192 v1.0.1 - Bug fixes</p> </li> <li>Example: Fixed memory leak, corrected calculation</li> </ul>"},{"location":"RELEASING/#release-types","title":"Release Types","text":""},{"location":"RELEASING/#stable-release","title":"Stable Release","text":"<pre><code>git tag -a v1.1.0 -m \"Release v1.1.0\"\ngit push origin v1.1.0\n</code></pre>"},{"location":"RELEASING/#pre-release-beta-rc","title":"Pre-Release (Beta, RC)","text":"<pre><code>git tag -a v1.1.0-beta.1 -m \"Beta release v1.1.0-beta.1\"\ngit push origin v1.1.0-beta.1\n</code></pre> <p>Mark as pre-release on GitHub after creation.</p>"},{"location":"RELEASING/#manual-release-emergency","title":"Manual Release (Emergency)","text":"<p>If GitHub Actions fails, you can release manually:</p>"},{"location":"RELEASING/#1-update-version","title":"1. Update Version","text":"<pre><code>./update-version.sh 1.1.0\ngit commit -am \"chore: bump version to v1.1.0\"\ngit push\n</code></pre>"},{"location":"RELEASING/#2-build-locally","title":"2. Build Locally","text":"<pre><code># Install goreleaser\ngo install github.com/goreleaser/goreleaser@latest\n\n# Create snapshot (no tag needed)\ngoreleaser release --snapshot --clean\n\n# Or full release (requires tag)\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\ngoreleaser release --clean\n</code></pre>"},{"location":"RELEASING/#3-upload-to-github","title":"3. Upload to GitHub","text":"<p>Manually upload binaries from <code>dist/</code> to GitHub release.</p>"},{"location":"RELEASING/#viewing-releases","title":"Viewing Releases","text":"<pre><code># List all tags\ngit tag -l\n\n# Show latest tag\ngit describe --tags --abbrev=0\n\n# View release on GitHub\ngh release view v1.1.0\n\n# List all releases\ngh release list\n</code></pre>"},{"location":"RELEASING/#hotfix-release","title":"Hotfix Release","text":"<p>For urgent bug fixes:</p> <pre><code># 1. Create hotfix branch\ngit checkout -b hotfix/1.0.1 v1.0.0\n\n# 2. Fix the bug\ngit commit -am \"fix: critical bug\"\n\n# 3. Tag and push\ngit tag -a v1.0.1 -m \"Hotfix v1.0.1\"\ngit push origin v1.0.1\n\n# 4. Merge back\ngit checkout main\ngit merge hotfix/1.0.1\ngit push\n</code></pre>"},{"location":"RELEASING/#rollback","title":"Rollback","text":"<p>If you need to roll back a release:</p> <pre><code># 1. Delete tag locally\ngit tag -d v1.1.0\n\n# 2. Delete tag on remote\ngit push origin :refs/tags/v1.1.0\n\n# 3. Delete GitHub release\ngh release delete v1.1.0\n\n# 4. Revert version commit\ngit revert &lt;commit-hash&gt;\ngit push\n</code></pre>"},{"location":"RELEASING/#testing-before-release","title":"Testing Before Release","text":"<pre><code># Run all tests\ngo test ./...\n\n# Test with race detector\ngo test -race ./...\n\n# Build for all platforms\nGOOS=linux GOARCH=amd64 go build ./cmd/imgx\nGOOS=darwin GOARCH=arm64 go build ./cmd/imgx\nGOOS=windows GOARCH=amd64 go build ./cmd/imgx\n\n# Or use goreleaser snapshot\ngoreleaser release --snapshot --clean\n</code></pre>"},{"location":"RELEASING/#monitoring-release","title":"Monitoring Release","text":"<p>After pushing a tag:</p> <pre><code># Watch workflow progress\ngh run watch\n\n# View workflow logs\ngh run list --workflow=release.yml\ngh run view &lt;run-id&gt; --log\n\n# Check release\ngh release view v1.1.0\n</code></pre>"},{"location":"RELEASING/#troubleshooting","title":"Troubleshooting","text":""},{"location":"RELEASING/#workflow-fails-to-commit","title":"Workflow fails to commit","text":"<p>Problem: Permission denied when pushing version commit.</p> <p>Solution: Check that <code>GITHUB_TOKEN</code> has <code>contents: write</code> permission in workflow file.</p>"},{"location":"RELEASING/#version-not-updated","title":"Version not updated","text":"<p>Problem: version.go still shows old version after release.</p> <p>Solution: <pre><code>git pull  # Pull the automated commit\n</code></pre></p>"},{"location":"RELEASING/#build-fails","title":"Build fails","text":"<p>Problem: GoReleaser build fails.</p> <p>Solution: Check <code>.goreleaser.yml</code> configuration and workflow logs.</p>"},{"location":"RELEASING/#tag-already-exists","title":"Tag already exists","text":"<p>Problem: Tag <code>v1.1.0</code> already exists.</p> <p>Solution: <pre><code># Delete and recreate\ngit tag -d v1.1.0\ngit push origin :refs/tags/v1.1.0\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\ngit push origin v1.1.0\n</code></pre></p>"},{"location":"RELEASING/#tips","title":"Tips","text":"<ul> <li>\ud83c\udff7\ufe0f Always use annotated tags (<code>-a</code>), not lightweight tags</li> <li>\ud83d\udcdd Write clear commit messages</li> <li>\u2705 Test thoroughly before tagging</li> <li>\ud83d\udd04 Pull after workflow completes to get version commit</li> <li>\ud83d\udcca Monitor GitHub Actions for any failures</li> <li>\ud83d\ude80 Announce releases in relevant channels</li> </ul>"},{"location":"RELEASING/#see-also","title":"See Also","text":"<ul> <li>VERSIONING.md - Version management details</li> <li>.github/workflows/release.yml - Release workflow</li> <li>.goreleaser.yml - Build configuration</li> </ul>"},{"location":"VERSIONING/","title":"Version Management","text":"<p>imgx uses a single source of truth for version information across the entire project.</p>"},{"location":"VERSIONING/#version-files","title":"Version Files","text":""},{"location":"VERSIONING/#primary-source","title":"Primary Source","text":"<ul> <li><code>version.go</code> - The canonical version definition   <pre><code>const Version = \"1.0.0\"\n</code></pre></li> </ul>"},{"location":"VERSIONING/#secondary-references","title":"Secondary References","text":"<ul> <li><code>VERSION</code> - Plain text file for scripts/automation</li> <li>CLI (<code>cmd/imgx/main.go</code>) - Uses <code>imgx.Version</code> from version.go</li> <li>Metadata (<code>metadata_write.go</code>) - Uses <code>imgx.Version</code> for XMP metadata</li> </ul>"},{"location":"VERSIONING/#automated-release-workflow","title":"Automated Release Workflow","text":""},{"location":"VERSIONING/#creating-a-release-automated","title":"Creating a Release (Automated)","text":"<p>The easiest way to release a new version is to push a git tag. GitHub Actions will automatically handle everything:</p> <pre><code># 1. Commit your changes\ngit add .\ngit commit -m \"feat: add new feature\"\ngit push\n\n# 2. Create and push a tag\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\ngit push origin v1.1.0\n</code></pre> <p>What happens automatically: 1. GitHub Actions detects the new tag 2. Extracts version from tag (e.g., <code>v1.1.0</code> \u2192 <code>1.1.0</code>) 3. Updates <code>version.go</code> and <code>VERSION</code> files 4. Commits changes back to main branch with message: <code>chore: bump version to v1.1.0 [skip ci]</code> 5. Builds binaries for multiple platforms using GoReleaser 6. Creates GitHub release with binaries attached</p>"},{"location":"VERSIONING/#manual-version-update-optional","title":"Manual Version Update (Optional)","text":"<p>If you need to update the version manually without creating a release:</p>"},{"location":"VERSIONING/#using-the-script","title":"Using the Script","text":"<pre><code>./update-version.sh 1.1.0\n</code></pre>"},{"location":"VERSIONING/#manual-steps","title":"Manual Steps","text":"<ol> <li> <p>Edit <code>version.go</code>:    <pre><code>const Version = \"1.1.0\"  // Update this\n</code></pre></p> </li> <li> <p>Update <code>VERSION</code> file:    <pre><code>echo \"1.1.0\" &gt; VERSION\n</code></pre></p> </li> <li> <p>Commit:    <pre><code>git commit -am \"chore: bump version to v1.1.0\"\ngit push\n</code></pre></p> </li> </ol>"},{"location":"VERSIONING/#version-information-location","title":"Version Information Location","text":"<p>The version appears in:</p> <ol> <li> <p>Library metadata - Embedded in XMP metadata as <code>creator_tool</code> <pre><code>XMP:CreatorTool = \"imgx v1.0.0\"\n</code></pre></p> </li> <li> <p>CLI version flag <pre><code>imgx --version\n# Output: imgx version 1.0.0\n</code></pre></p> </li> <li> <p>Go module - When imported by other projects    <pre><code>import \"github.com/razzkumar/imgx\"\nfmt.Println(imgx.Version)  // \"1.0.0\"\n</code></pre></p> </li> </ol>"},{"location":"VERSIONING/#semantic-versioning","title":"Semantic Versioning","text":"<p>imgx follows Semantic Versioning:</p> <ul> <li>MAJOR (1.x.x) - Incompatible API changes</li> <li>MINOR (x.1.x) - New functionality, backwards compatible</li> <li>PATCH (x.x.1) - Bug fixes, backwards compatible</li> </ul>"},{"location":"VERSIONING/#examples","title":"Examples","text":"<ul> <li><code>1.0.0</code> \u2192 <code>2.0.0</code> - Breaking change (removed Options field)</li> <li><code>1.0.0</code> \u2192 <code>1.1.0</code> - New feature (added new image filter)</li> <li><code>1.0.0</code> \u2192 <code>1.0.1</code> - Bug fix (fixed resize calculation)</li> </ul>"},{"location":"VERSIONING/#release-checklist","title":"Release Checklist","text":"<p>When preparing a release:</p> <ul> <li>[ ] Update CHANGELOG.md (if applicable)</li> <li>[ ] Run tests: <code>go test ./...</code></li> <li>[ ] Build CLI: <code>go build ./cmd/imgx</code></li> <li>[ ] Test CLI: <code>./imgx --version</code></li> <li>[ ] Commit all changes</li> <li>[ ] Create and push tag: <code>git tag -a vX.Y.Z -m \"Release vX.Y.Z\"</code></li> <li>[ ] Push tag: <code>git push origin vX.Y.Z</code></li> <li>[ ] GitHub Actions will handle the rest!</li> </ul>"},{"location":"VERSIONING/#checking-current-version","title":"Checking Current Version","text":""},{"location":"VERSIONING/#from-code","title":"From Code","text":"<pre><code>import \"github.com/razzkumar/imgx\"\n\nfunc main() {\n    fmt.Println(\"imgx version:\", imgx.Version)\n}\n</code></pre>"},{"location":"VERSIONING/#from-command-line","title":"From Command Line","text":"<pre><code># CLI version\n./imgx --version\n\n# Library version\ngo list -m github.com/razzkumar/imgx\n\n# Git tags\ngit describe --tags --abbrev=0\n\n# From file\ncat VERSION\n</code></pre>"},{"location":"VERSIONING/#github-actions-workflow","title":"GitHub Actions Workflow","text":"<p>The release workflow (<code>.github/workflows/release.yml</code>) performs these steps:</p> <ol> <li>Extract Version - Gets version from git tag (removes <code>v</code> prefix)</li> <li>Update Files - Updates <code>version.go</code> and <code>VERSION</code></li> <li>Commit - Commits changes back to main with <code>[skip ci]</code> to avoid loops</li> <li>Build - Uses GoReleaser to build binaries for:</li> <li>Linux (amd64, arm64)</li> <li>macOS (amd64, arm64)</li> <li>Windows (amd64)</li> <li>Release - Creates GitHub release with all binaries</li> </ol>"},{"location":"VERSIONING/#workflow-triggers","title":"Workflow Triggers","text":"<p>The workflow triggers on any tag push: <pre><code>on:\n  push:\n    tags:\n      - \"*\"\n</code></pre></p>"},{"location":"VERSIONING/#required-permissions","title":"Required Permissions","text":"<pre><code>permissions:\n  contents: write  # To create releases and commit\n  packages: write  # To publish packages\n</code></pre>"},{"location":"VERSIONING/#troubleshooting","title":"Troubleshooting","text":""},{"location":"VERSIONING/#version-not-updated-after-tag-push","title":"Version not updated after tag push","text":"<p>Check GitHub Actions workflow run: <pre><code># View workflow status\ngh run list --workflow=release.yml\n\n# View specific run\ngh run view &lt;run-id&gt; --log\n</code></pre></p>"},{"location":"VERSIONING/#manual-fix-if-workflow-fails","title":"Manual fix if workflow fails","text":"<pre><code># 1. Pull latest changes\ngit pull\n\n# 2. Update version manually\n./update-version.sh 1.2.2\n\n# 3. Push changes\ngit push\n</code></pre>"},{"location":"VERSIONING/#notes","title":"Notes","text":"<ul> <li>Always use semantic versioning (MAJOR.MINOR.PATCH)</li> <li>Tag format: <code>v1.0.0</code> (with <code>v</code> prefix)</li> <li>Stored version: <code>1.0.0</code> (without <code>v</code> prefix)</li> <li>The <code>[skip ci]</code> in commit message prevents infinite workflow loops</li> <li>version.go is the source of truth for Go code</li> <li>VERSION file is for scripts and automation</li> <li>CLI automatically uses library version</li> <li>All processed images show the version in metadata</li> </ul>"}]}